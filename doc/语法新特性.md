[TOC]

# TC39 ææ¡ˆ

https://github.com/tc39/proposals

TC39ææ¡ˆæœ‰ä»¥ä¸‹4ä¸ªé˜¶æ®µï¼š

**Stage 0: Strawpersonï¼š**

ç”±TC39æˆå‘˜æè®®ä»»ä½•æƒ³æ³•ã€ä¿®æ”¹ã€ä»¥å‰æ²¡æœ‰è¢«æè®®çš„ï¼ˆæˆ–ä»¥å‰çš„æè®®è¢«å¦å†³çš„ï¼‰ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ° Stage 0 ææ¡ˆçš„é¡µé¢ä¸­ã€‚

**Stage 1: Proposalï¼š**

ææ¡ˆæ­£å¼ç”±TC39æˆå‘˜åˆ›ç«‹ï¼Œææ¡ˆæè¿°ä¸€ä¸ªç»“æ„åŒ–é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

**Stage 2: Draftï¼š**

ä½¿ç”¨æ­£å¼çš„è§„èŒƒè¯­è¨€ç²¾ç¡®æè¿°ææ¡ˆçš„è¯­æ³•å’Œè¯­ä¹‰ã€‚

**Stage 3: Candidateï¼š**

ææ¡ˆçš„è§„èŒƒå’Œç”¨æˆ·çš„åé¦ˆå·²ç»å®Œæˆã€‚

**Stage 4ï¼šFInishedï¼š**

ææ¡ˆå°†åœ¨æ¥ä¸‹æ¥çš„ECMAScriptç‰ˆæœ¬å‡ºç°ã€‚

# ES2021

## æ•°å­—åˆ†éš”ç¬¦

### è¯­æ³•æè¿°

ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œ[æ–°çš„ JavaScript è¯­è¨€åŠŸèƒ½](https://github.com/tc39/proposal-numeric-separator) å¯ç”¨äº†ä¸‹åˆ’çº¿ä½œä¸ºæ•°å­—ä¸­çš„åˆ†éš”ç¬¦ã€‚å¯ä»¥åœ¨äºŒè¿›åˆ¶ï¼Œåè¿›åˆ¶ï¼Œåå…­è¿›åˆ¶ï¼Œå…«è¿›åˆ¶ç­‰æ•°å­—çš„ä»»æ„ä½ç½®ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†å‰²ã€‚

```js
console.log(123_123_123.01 === 123123123.01); // true
console.log(0b11111111_11111111_00001111 === 0b111111111111111100001111); // true äºŒè¿›åˆ¶
console.log(0o567_123_233 === 0o567123233); // true å…«è¿›åˆ¶
console.log(0x76fd_123df === 0x76fd123df); // true åå…­è¿›åˆ¶
```

### Babel æ’ä»¶

[`[@babel/plugin-proposal-numeric-separator]`](https://babeljs.io/docs/en/babel-plugin-proposal-numeric-separator)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## é€»è¾‘åˆ†é…

### è¯­æ³•æè¿°

æ–°å¢é€»è¾‘åˆ†é…è¿ç®—ç¬¦ï¼š&&=`ï¼Œ`||=

```js
a ||= b; // a || a=b
a &&= b; // a && a=b
```

### Babel æ’ä»¶

[`@babel/plugin-proposal-logical-assignment-operators`](https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## Weakref

### è¯­æ³•æè¿°

```
// åˆ›å»ºä¸€ä¸ªå¼•ç”¨ç»™å®šç›®æ ‡å¯¹è±¡çš„ WeakRef å¯¹è±¡
const ref = new WeakRef(targetObject)

// è¿”å› WeakRef å®ä¾‹çš„ç›®æ ‡å¯¹è±¡ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡å·²è¢«åƒåœ¾æ”¶é›†ï¼Œåˆ™è¿”å› undefined
const obj = ref.deref()

// åˆ›å»ºä¸€ä¸ªä½¿ç”¨ç»™å®šå›è°ƒçš„æ³¨å†Œè¡¨å¯¹è±¡
const registry = new FinalizationRegistry([callback])

// ä½¿ç”¨æ³¨å†Œå®ä¾‹æ³¨å†Œä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å¦‚æœå¯¹è±¡è¢«åƒåœ¾æ”¶é›†ï¼Œæ³¨å†Œçš„å›è°ƒå¯èƒ½ä¼šè¢«è°ƒç”¨
registry.register(target, heldValue, [unregisterToken])

// ä»æ³¨å†Œè¡¨å®ä¾‹ä¸­æ³¨é”€ç›®æ ‡å¯¹è±¡
registry.unregister(unregisterToken)

```

### polyfill

å¾…å®šã€‚ã€‚ã€‚

## Promise.any

### è¯­æ³•æè¿°

è°æœ€å…ˆæˆåŠŸæ‰§è¡Œå°±è¿”å›è°ï¼Œå¦åˆ™å…¨éƒ¨å¤±è´¥æ‰è¿”å›ã€‚

`Promise.race()` ï¼š è°æ‰§è¡Œå¿«å°±è¿”å›è°ï¼Œæ— è®ºæˆè´¥

```js
const promises = [Promise.reject('ERROR A'), Promise.reject('ERROR B'), Promise.resolve('result')];

Promise.any(promises)
  .then((value) => {
    console.log('value: ', value); //value: result
  })
  .catch((err) => {
    console.log('err: ', err);//è‹¥å…¨éƒ¨å¤±è´¥ï¼Œåˆ™è¾“å‡º  err:  AggregateError: All promises were rejected
  });
```

### polyfill

åœ¨ core-js ä¸­ [any.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/promise/any.js)

## String.prototype.replaceAll

### è¯­æ³•æè¿°

æ›¿æ¢å­—ç¬¦ä¸²ä¸­å…¨éƒ¨åŒ¹é…çš„å†…å®¹

```js
'aabbcc'.replaceAll('b', '.'); //aa..cc
// ç­‰ä»·ä¸‹é¢çš„æ–¹æ³•
'aabbcc'.replace(/b/g, '.'); //aa..cc
```

### polyfill

åœ¨ core-js ä¸­ [replace-all.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/replace-all.js)

# ES2020

## String.prototype.matchAll

### è¯­æ³•æè¿°

æä¾›ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ¥æ”¯æŒæ•è·ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„å¯ä»¥æ‰©å±•ä¸ºæ•°ç»„

```js
const string = 'test1test2test3';
const regex = /(test)(\d)?/g; // gä¿®é¥°ç¬¦å¿…é¡»æœ‰

console.log(string.match(regex)); // [ 'test1', 'test2', 'test3' ]

// è·å–æ¯ä¸€æ¬¡æ•è·çš„è¯¦ç»†ç»“æœ
for (const match of string.matchAll(regex)) {
  console.log(match);
  //["test1", "test", "1", index: 0, input: "test1test2test34", groups: undefined]
  //["test2", "test", "2", index: 5, input: "test1test2test34", groups: undefined]
  //["test3", "test", "3", index: 10, input: "test1test2test34", groups: undefined]
}

// ç­‰ä»·äº
let match;
while ((match = regex.exec(string))) {
  console.log(match);
}

```

### polyfill

åœ¨ core-js ä¸­ [match-all.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/match-all.js)

## åŠ¨æ€å¯¼å…¥

### è¯­æ³•æè¿°

åŠ¨æ€å¯¼å…¥è¯­æ³•å…è®¸æˆ‘ä»¬å°†`import`ä½œä¸ºèƒ½å¤Ÿè¿”å›`promise`çš„å‡½æ•°è¿›è¡Œè°ƒç”¨ã€‚è¿™å¯¹äºåœ¨ä»£ç è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ¨¡å—ç‰¹åˆ«æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³åŸºäºä»£ç ä¸­çš„æŸäº›é€»è¾‘æ¥åŠ è½½æŸä¸ªç»„ä»¶æˆ–æ¨¡å—ã€‚

```js
import(`./home.js`)  // home.jsä¸­export const export1 = ''; ....
  .then(({export1, export2})=>
    // åŠ è½½æˆåŠŸçš„å›è°ƒ
  })
  .catch(err => {
    // åŠ è½½å¤±è´¥çš„å›è°ƒ
  });
```

### Babel æ’ä»¶

[`@babel/plugin-syntax-dynamic-import`](https://babeljs.io/docs/en/babel-plugin-syntax-dynamic-import)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## BigInt

### è¯­æ³•æè¿°

JavaScriptæ–°å¢çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœè¶…è¿‡JavaScript å¯ä»¥å¤„ç†çš„æ•°å€¼èŒƒå›´`-2^53`ï½`+2^53`ã€‚å°±æ˜¯è¿™æ ·`-9007199254740992`åˆ°`+9007199254740992`ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ•°æ®ç±»å‹æ¥æ ‡è¯†ã€‚ä¹Ÿå¯ä»¥é€šè¿‡`Number.MIN_SAFE_INTEGER`å’Œ`Number.MAX_SAFE_INTEGER`æ¥åˆ¤æ–­æœ€å€¼ã€‚

## ä½¿ç”¨ï¼š

éœ€è¦åœ¨æ•°å­—åé¢åŠ ä¸€ä¸ª n å°±ä¼šå˜æˆä¸€ä¸ª BigInt æˆ–è€…ä½¿ç”¨ BigInt()åŒ…èµ·æ¥ã€‚

```js
//ä¸Numberæ¯”è¾ƒ
console.log(Number(10n )=== 10) //true
console.log(10n === BigInt(10)) //true
console.log(10n === 10) //false
console.log(10n == 10) //true
//åªèƒ½è½¬æ¢æ•´æ•°
console.log(BigInt(10.4)ï¼‰//Uncaught RangeError: The number 10.4 cannot be converted to a BigInt...
//è®¡ç®—
console.log(10n + 10n)  //20n
console.log(10n - 10n)  //0n
console.log(10n * 10n)  //100n
console.log(10n / 10n)  //1n
onsole.log(14n % 10n)  //å–ä½™æ•°ã€‚ 4n
//æ­£è´Ÿæ•°
onsole.log(-10n) //-10n
onsole.log(+10n) //Uncaught TypeError: Cannot convert a BigInt value to a number at <anonymous>:1:13
//ä¸Numberä¸èƒ½ç›´æ¥æç«¯ï¼Œéœ€è¦è½¬æ¢æˆåŒä¸€ä¸ªç±»å‹
console.log(Number(10n)+10) //20

```

### Babel æ’ä»¶

[`@babel/plugin-syntax-bigint`](https://babeljs.io/docs/en/babel-plugin-syntax-bigint)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## Promise.allSettled

### è¯­æ³•æè¿°

æ— è®ºå®ƒè¢«è®¤ä¸ºæ˜¯`resolve`æˆ–`reject`ï¼Œéƒ½ä¼šè¿›å…¥æ­£å¸¸å›è°ƒæµç¨‹

```js
const promises = [
  new Promise((resolve) => {
    resolve();
  }),
  new Promise((resolve, reject) => {
    reject();
  }),
  new Promise((resolve) => {
    resolve();
  })
];

Promise.allSettled(promises).then((results) =>
  results.forEach((result) => console.log(result.status))
);
```

### polyfill

åœ¨ core-js [all-settled.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/promise/all-settled.js)

## globalThis

### è¯­æ³•æè¿°

`globalThis` æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ ‡å‡†æ–¹æ³•ç”¨æ¥è·å–å…¨å±€ thisï¼Œ å¯¹ windowã€selfã€global çš„ä¸€ä¸ªç»Ÿä¸€ã€‚

### polyfill

åœ¨ core-js [global-this.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/global-this.js)

## for-in

### è¯­æ³•æè¿°

`for (x in obj) ...` æ˜¯åœ¨å¾ˆå¤šæ—¶å€™éƒ½è¶…çº§æœ‰ç”¨çš„è¯­æ³•ï¼Œä¸»è¦æ˜¯éå†å¯¹è±¡çš„ key å€¼ã€‚

ECMA è§„èŒƒä¸­å¹¶æ²¡æœ‰æ˜ç¡®å®šä¹‰ for (x in y) çš„é¡ºåºã€‚å°½ç®¡ï¼Œåœ¨æ­¤ä¹‹å‰æµè§ˆå™¨å®ç°äº†ä¸€è‡´çš„é¡ºåºï¼Œä½†æ˜¯ï¼Œç°åœ¨å·²ç»è¢«çº³å…¥åˆ° ES2020 çš„å®˜æ–¹è§„èŒƒä¸­äº†

```js
const obj = {
  name: "x1",
  age: "16"
}
for (let key in obj) {
  console.log(key+"=",boj[key]);
  //name= x1
	//age= 16
}
```

## å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆOptional Chainingï¼‰

### è¯­æ³•æè¿°
  ?. ä¸ . ç±»ä¼¼ï¼Œéƒ½æ˜¯è·å–å½“å‰ç»“æ„ä½“çš„æˆå‘˜å˜é‡ï¼ŒåŒºåˆ«åœ¨äºï¼š
  . å¦‚æœä¸€ä¸ªç»“æ„ä½“å†…ä¸å­˜åœ¨è¿™ä¸ªå˜é‡åï¼Œä¼šè¿”å›undefinedï¼Œåœ¨undefinedä¸­å†å»å–æŸä¸ªå˜é‡åï¼Œä¼šæŠ¥é”™å¹¶ä¸­æ–­ç¨‹åºè¿è¡Œ;é™¤éæ¯æ¬¡å–å€¼å‰åˆ¤æ–­ä¸€ä¸‹çŠ¶æ€ï¼›ä»£ç é€»è¾‘è¾ƒå¤æ‚æ—¶ï¼Œä»£ç ä¼šå¾ˆé•¿ï¼Œå½±å“å¯è¯»æ€§ï¼›
  ?. ä¸éœ€è¦åˆ¤æ–­å½“å‰çš„çŠ¶æ€ï¼Œé€šè¿‡çŸ­è·¯è®¡ç®—è·å–æœ€ç»ˆçš„å€¼ï¼Œå³å–å€¼è¿‡ç¨‹ä¸­ä¼šéšå¼çš„æ£€æŸ¥å–å€¼åæ˜¯ä¸æ˜¯undefinedå’Œnull,å¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥è¿”å›undefined;

```js
const obj = {
  foo: {
    bar: {
      baz: class {
      },
    },
  },
};

const baz = obj?.foo?.bar?.baz(); // class{}

const safe = obj?.qux?.baz(); //objä¸­ä¸å­˜åœ¨qux,ç›´æ¥è¿”å›undefinedï¼Œä¸å†ç»§ç»­å¾€ä¸‹å–å€¼äº†ï¼Œå› æ­¤ä¸ä¼šæŠ¥é”™ï¼Œä¸ä¼šä¸­æ–­ç¨‹åºè¿è¡Œ
const safe2 = obj?.foo.bar.qux?.(); // undefined åŒä¸Š

const willThrow = obj?.foo.bar.qux(); // Error: not a constructor æ™®é€šçš„.å¦‚æœæœ‰undefinedï¼Œè¿˜ä¼šç»§ç»­å–å€¼ï¼Œå¯¼è‡´æŠ¥é”™

// Top classes can be called directly, too.
class Test {
}
new Test?.(); // test instance

new exists?.(); // undefined
```

### Babel æ’ä»¶

[`@babel/plugin-proposal-optional-chaining`](https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## ç©ºä½åˆå¹¶è¿ç®—ç¬¦

### è¯­æ³•æè¿°

æ–°å¢è¿ç®—ç¬¦ï¼š??=

å±æ€§å€¼ä¸º null æˆ– undefined æ—¶ï¼ŒæŒ‡å®šé»˜è®¤å€¼

```js
a ??= b; // (a===null || a===undefined) && a = b
```

### Babel æ’ä»¶

[`@babel/plugin-proposal-nullish-coalescing-operator`](https://babeljs.io/docs/en/babel-plugin-proposal-nullish-coalescing-operator)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## import.meta

### è¯­æ³•æè¿°

`import.meta`æ˜¯ä¸€ä¸ªç»™ JavaScript æ¨¡å—æš´éœ²ç‰¹å®šä¸Šä¸‹æ–‡çš„å…ƒæ•°æ®å±æ€§çš„å¯¹è±¡ã€‚å®ƒåŒ…å«äº†è¿™ä¸ªæ¨¡å—çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªæ¨¡å—çš„ URLã€‚

### Babel æ’ä»¶

[`@babel/plugin-syntax-import-meta`](https://babeljs.io/docs/en/babel-plugin-syntax-import-meta)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## export-namespace-from

### è¯­æ³•æè¿°

```js
export * as ns from 'mod';
```

### Babel æ’ä»¶

`@babel/plugin-proposal-export-namespace-from`

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

# ES2019

## flat

### è¯­æ³•æè¿°

æ¥æ”¶ä¸€ä¸ªå‚æ•°ä¸ºå±•å¼€çš„æ·±åº¦ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ‰å¹³æ•°ç»„ï¼›è‹¥ä¸å†™å‚æ•°ï¼Œé»˜è®¤å±•å¼€ä¸€å±‚ï¼›è‹¥å‚æ•°å¤§äºæ•°ç»„æ·±åº¦ï¼Œåˆ™å…¨éƒ¨å±•å¼€ä¸ºä¸€ç»´æ•°ç»„ï¼›å‚æ•°ä¸º0æˆ–è´Ÿæ•°ï¼Œåˆ™è¿”å›åŸæ•°ç»„ã€‚

```js
const a = [1, [2, 3], [4, 5], 6, [7, [8, 9], [10, [11, 12], 13], 14], 15];
console.log(a.flat(0)); //[1, Array(2), Array(2), 6, Array(4), 15]
console.log(a.flat(1)); // [1, 2, 3, 4, 5, 6, 7, Array(2), Array(3), 14, 15]
console.log(a.flat(3)); //[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
console.log(a.flat(5)); //[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]
```

### polyfill

åœ¨ core-js [flat.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/array/flat.js)

## flatMap

### è¯­æ³•æè¿°

**map()** + **flat()** => **flatmap()**

å¸¦æœ‰æ“çºµå€¼çš„æ‰å¹³æ•°ç»„ï¼Œç”±æä¾›ç»™å®ƒçš„å›è°ƒå‡½æ•°æä¾›ã€‚å°±åƒä¸€ä¸ª map ä¸€æ ·ã€‚

å…ˆ mapï¼Œå† flat, åªèƒ½å±•å¼€ä¸€å±‚æ•°æ®

```js
const arr = ['Codedam', 'is Awsome', '!'];

const mapResult = arr.map((item) => item.split(' '));
console.log(mapResult); // [ [ 'Codedam' ], [ 'is', 'Awsome' ], [ '!' ] ]

const flatMapResult = arr.flatMap((chunk) => chunk.split(' '));
console.log(flatMapResult); // ['Codedam', 'is',  'Awsome', '!'];
```

### polyfill

åœ¨ core-js [flat-map.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/array/flat-map.js)

## Object.fromEntries()

### è¯­æ³•æè¿°

å®ƒæ˜¯ Object.entries çš„åå‘æ–¹æ³•ï¼Œå®ƒä¹Ÿæ˜¯å…‹éš†å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸€ï¼Œåˆ‡å…¥å¼å¯¹è±¡å’Œæ•°æ®é€šè¿‡å¼•ç”¨å¤åˆ¶

```js
//æ™®é€šå¯¹è±¡
const obj = {
  name: 'lxw',
  age: 20,
  sons: [1, 2, 3],
  func: () => {},
  o: {}
};
const entries = Object.entries(obj);
console.log(entries);
// 0: (2) ["name", "lxw"]
// 1: (2) ["age", 20]
// 2: (2) ["sons", Array(3)]
// 3: (2) ["func", Æ’]
// 4: (2) ["o", {â€¦}]
// length: 5
const fromEntries = Object.fromEntries(entries);
console.log(fromEntries); // Object { age: 20,func: ()=>{},name: "lxw",o: {},sons: (3) [1, 2, 3]}
//ç¬¦åˆè½¬æ¢è¦æ±‚çš„æ•°æ®ç»“æ„
const obj1 = [["a","1"],["b","2"],["c","3"]]
const fromEntriesX = Object.fromEntries(obj1);
console.log(fromEntriesX); //{a: "1", b: "2", c: "3"}

//å¦‚æœlistå¤§äºä¸¤ä¸ªå€¼ï¼Œå–å‰ä¸¤ä¸ª;å°äºä¸¤ä¸ªå€¼ï¼Œåˆ™ä¸ºundefined;ä¸ºç©ºï¼Œåˆ™key,valueéƒ½æ˜¯undefined
const obj12 = [["a","1"ï¼Œ"2"],["b","2"],["c"],[]]
const fromEntriesX = Object.fromEntries(obj1);
console.log(fromEntriesX); //{a: "1", b: "2", c: undefined, undefined: undefined}

console.log(obj === fromEntries); // false
console.log(obj.sons === fromEntries.sons); // true
console.log(obj.func === fromEntries.func); // true
```

### polyfill

åœ¨ core-js [from-entries.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/object/from-entries.js)

## trimStart

### è¯­æ³•æè¿°

```js
const description = '   Unlocks Secret Codes ';
console.log(description.trimStart()); // "Unlocks Secret Codes "
```

### polyfill

åœ¨ core-js [trim-start.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/trim-start.js)

## trimEnd

### è¯­æ³•æè¿°

```js
const category = '  JavaScript ';
console.log(category.trimEnd()); // "  JavaScript"
```

### polyfill

åœ¨ core-js [trim-end.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/trim-end.js)

## catch ç»‘å®š

### è¯­æ³•æè¿°

èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨ catch ç»‘å®šçš„åœ°æ–¹é€‰æ‹©æ€§åœ°åˆ é™¤å®ƒ

```js
try {
  // trying to use a new ES2019 feature
  // which may not be implemented in other browsers
} catch (unused) {
  // revert back to old way
}

===>

try {
  ...
} catch {
  ...
}
```

### Babel æ’ä»¶

[`@babel/plugin-proposal-optional-catch-binding`](https://babeljs.io/docs/en/babel-plugin-proposal-optional-catch-binding)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## Symbolæè¿°

### è¯­æ³•æè¿°

å½“æˆ‘ä»¬åœ¨ JS ä¸­åˆ›å»ºä¸€ä¸ª Symbol æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªåœ¨ä»¥åç”¨äºè°ƒè¯•çš„æè¿°ã€‚å¿…é¡»åœ¨ `toString()` æ–¹æ³•çš„å¸®åŠ©ä¸‹æ‰èƒ½è®¿é—®æè¿°ã€‚

ES10 æ·»åŠ äº†ä¸€ä¸ªæ–°çš„åä¸º description çš„åªè¯»å±æ€§ï¼Œå®ƒè¿”å› Symbol çš„æè¿°ã€‚

```
const mySymbol = Symbol("myDescription");

console.log(mySymbol.toString()); // Symbol(myDescription)

console.log(mySymbol.description); // myDescription
```

### polyfill

åœ¨ core-js [description.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/symbol/description.js)

## Function.prototype.toString - ä¿®è®¢ç‰ˆ

æˆ‘ä»¬ä¹‹å‰å·²ç»åœ¨å‡½æ•°åŸå‹ä¸­ä½¿ç”¨äº†`toString`æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ ES2019 ä¸­å®ƒå·²è¢«ä¿®æ”¹å¹¶åŒ…å«å‡½æ•°å†…çš„æ³¨é‡Šï¼Œè¯·æ³¨æ„å®ƒåœ¨`Arrow Functions`ä¸Šä¸èµ·ä½œç”¨ã€‚

```js
function /* comment */ foo /* another comment */() {}

// Before
console.log(foo.toString()); // function foo(){}

// Now ES2019
console.log(foo.toString()); // function /* comment */ foo /* another comment */ (){}

// Arrow Syntax
const bar /* comment */ = /* another comment */ () => {};

console.log(bar.toString()); // () => {}
```

## JSON å˜åŠ¨

JavaScript è§„å®šæœ‰ 5 ä¸ªå­—ç¬¦ï¼Œä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨è½¬ä¹‰å½¢å¼ã€‚

```js
U+005Cï¼šåæ–œæ ï¼ˆreverse solidus)
U+000Dï¼šå›è½¦ï¼ˆcarriage returnï¼‰
U+2028ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰
U+2029ï¼šæ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰
U+000Aï¼šæ¢è¡Œç¬¦ï¼ˆline feedï¼‰
```

ä¸¾ä¾‹æ¥è¯´ï¼Œå­—ç¬¦ä¸²é‡Œé¢ä¸èƒ½ç›´æ¥åŒ…å«åæ–œæ ï¼Œä¸€å®šè¦è½¬ä¹‰å†™æˆ\æˆ–è€…\u005cã€‚

è¿™ä¸ªè§„å®šæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œéº»çƒ¦åœ¨äº JSON æ ¼å¼å…è®¸å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨è¾“å‡ºçš„ JSON è¢« JSON.parse è§£æï¼Œå°±æœ‰å¯èƒ½ç›´æ¥æŠ¥é”™ã€‚

```
let jso = '"\u2028"';
JSON.parse(jso); // å¯èƒ½æŠ¥é”™
```

JSON æ ¼å¼å·²ç»å†»ç»“ï¼ˆRFC 7159ï¼‰ï¼Œæ²¡æ³•ä¿®æ”¹äº†ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ä¸ªæŠ¥é”™ï¼ŒES2019 å…è®¸ JavaScript å­—ç¬¦ä¸²ç›´æ¥è¾“å…¥ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚

æ ¹æ®æ ‡å‡†ï¼ŒJSON æ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç ã€‚ä½†æ˜¯ï¼Œç°åœ¨çš„ JSON.stringify()æ–¹æ³•æœ‰å¯èƒ½è¿”å›ä¸ç¬¦åˆ UTF-8 æ ‡å‡†çš„å­—ç¬¦ä¸²ã€‚

å…·ä½“æ¥è¯´ï¼ŒUTF-8 æ ‡å‡†è§„å®šï¼Œ0xD800 åˆ° 0xDFFF ä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œ\uD834\uDF06 æ˜¯ä¸¤ä¸ªç ç‚¹ï¼Œä½†æ˜¯å¿…é¡»æ”¾åœ¨ä¸€èµ·é…å¯¹ä½¿ç”¨ï¼Œä»£è¡¨å­—ç¬¦?ã€‚è¿™æ˜¯ä¸ºäº†è¡¨ç¤ºç ç‚¹å¤§äº 0xFFFF çš„å­—ç¬¦çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚å•ç‹¬ä½¿ç”¨\uD834 å’Œ\uDFO6 è¿™ä¸¤ä¸ªç ç‚¹æ˜¯ä¸åˆæ³•çš„ï¼Œæˆ–è€…é¢ å€’é¡ºåºä¹Ÿä¸è¡Œï¼Œå› ä¸º\uDF06\uD834 å¹¶æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ã€‚

JSON.stringify()çš„é—®é¢˜åœ¨äºï¼Œå®ƒå¯èƒ½è¿”å› 0xD800 åˆ° 0xDFFF ä¹‹é—´çš„å•ä¸ªç ç‚¹ã€‚

```js
JSON.stringify('\u{D834}'); // "\u{D834}"
```

**ä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼ŒES2019 æ”¹å˜äº† JSON.stringify()çš„è¡Œä¸ºã€‚å¦‚æœé‡åˆ° 0xD800 åˆ° 0xDFFF ä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚**

```js
JSON.stringify('\u{D834}'); // ""\\uD834""
JSON.stringify('\uDF06\uD834'); // ""\\udf06\\ud834""
```

å‚è€ƒï¼š https://blog.csdn.net/weixin_44182099/article/details/97868718

### Babel æ’ä»¶

[`@babel/plugin-proposal-json-strings`](https://babeljs.io/docs/en/babel-plugin-proposal-json-strings)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

# ES2018

## å¼‚æ­¥è¿­ä»£

### è¯­æ³•æè¿°

**for await (let val of stream)**

```js
// ç”Ÿæˆè¿­ä»£å™¨
async function* genAnswers() {
  var stream = [Promise.resolve(4), Promise.resolve(9), Promise.resolve(12)];
  var total = 0;
  for await (let val of stream) {
    total += await val;
    yield total;
  }
}

function forEach(ai, fn) {
  return ai.next().then(function (r) {
    if (!r.done) {
      fn(r);
      return forEach(ai, fn);
    }
  });
}

var output = 0;
forEach(genAnswers(), function (val) {
  output += val.value;
}).then(function () {
  console.log(output); // 42
});

// ä¸ä½¿ç”¨è¿­ä»£å™¨
async function genAnswers() {
  var stream = [Promise.resolve(4), Promise.resolve(9), Promise.resolve(12)];
  var total = 0;
  for await (let val of stream) {
    console.log(val);//ç¬¬ä¸€æ¬¡ï¼š4  ç¬¬äºŒæ¬¡ï¼š9  ç¬¬ä¸‰æ¬¡ï¼š12
    total += val; //ç¬¬ä¸€æ¬¡ï¼š4 ç¬¬äºŒæ¬¡ï¼š13 ç¬¬ä¸‰æ¬¡ï¼š25
  }
  return total; //25
}

genAnswers().then((res) => {
  console.log(res); //25
});
```

### Babel æ’ä»¶

[`@babel/plugin-proposal-async-generator-functions`](https://babeljs.io/docs/en/babel-plugin-proposal-async-generator-functions)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## Promise.finally

ä¸ç®¡æˆåŠŸæˆ–å¤±è´¥ï¼Œéƒ½ä¼šæ‰§è¡Œfinallyã€‚

### è¯­æ³•æè¿°

```js
function doSomething() {
  doSomething1()
    .then(doSomething2)
    .then(doSomething3)
    .catch((err) => {
      console.log(err);
    })
    .finally(() => {
      // finish here!
    });
}
```

### polyfill

åœ¨ core-js [finally.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/promise/finally.js)

## Rest/Spread å±æ€§

### è¯­æ³•æè¿°

ä¸ºå¯¹è±¡è§£æ„æä¾›äº†å’Œæ•°ç»„ä¸€æ ·çš„ Rest å‚æ•°ï¼ˆï¼‰å’Œå±•å¼€æ“ä½œç¬¦

```js
// å¯¹è±¡è§£æ„
const myObject = {
  a: 1,
  b: 2,
  c: 3
};

const { a, ...x } = myObject;
// a = 1
// x = { b: 2, c: 3 }

// Restå‚æ•°
function restParam({ a, ...x }) {
  // a = 1
  // x = { b: 2, c: 3 }
}

restParam({
  a: 1,
  b: 2,
  c: 3
});

// æ‰©å±•è¿ç®—ç¬¦å¯ä»¥åœ¨å…¶ä»–å¯¹è±¡å†…ä½¿ç”¨, å¯ä»¥è¿›è¡Œå¯¹è±¡çš„æµ…å¤åˆ¶
const obj1 = { a: 1, b: 2, c: 3 };
const obj2 = { ...obj1, z: 26 };
// obj2 is { a: 1, b: 2, c: 3, z: 26 }
```

### Babel æ’ä»¶

[`babel-plugin-proposal-object-rest-spread`](https://babeljs.io/docs/en/babel-plugin-proposal-object-rest-spread)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## æ­£åˆ™è¡¨è¾¾å¼å‘½åæ•è·ç»„

### è¯­æ³•æè¿°

```js
var re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
console.log(re.exec('1999-02-29').groups.year);
```

### Babel æ’ä»¶

[`@babel/plugin-transform-named-capturing-groups-regex`](https://babeljs.io/docs/en/babel-plugin-transform-named-capturing-groups-regex)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## æ­£åˆ™è¡¨è¾¾å¼åå‘æ–­è¨€

// TODO

### Babel æ’ä»¶

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## æ­£åˆ™è¡¨è¾¾å¼ dotAll æ¨¡å¼

### è¯­æ³•æè¿°

æ­£åˆ™è¡¨è¾¾å¼ä¸­ç‚¹`.`åŒ¹é…é™¤å›è½¦å¤–çš„ä»»ä½•å•å­—ç¬¦ï¼Œæ ‡è®°`s`æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå…è®¸è¡Œç»ˆæ­¢ç¬¦çš„å‡ºç°

```js
/hello.world/.test('hello\nworld'); // false
/hello.world/s.test('hello\nworld'); // true
```

### polyfill

åœ¨ core-js [dot-all.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/regexp/dot-all.js)

### Babel æ’ä»¶

[`@babel/plugin-transform-dotall-regex`](https://babeljs.io/docs/en/babel-plugin-transform-dotall-regex)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## æ­£åˆ™è¡¨è¾¾å¼ Unicode è½¬ä¹‰

### Babel æ’ä»¶

[`@babel/plugin-proposal-unicode-property-regex`](https://babeljs.io/docs/en/babel-plugin-proposal-unicode-property-regex)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²

### Babel æ’ä»¶

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

# ES2017

## async await

### è¯­æ³•æè¿°

```js
async function foo() {
  await bar();
}
```

### Babel æ’ä»¶

[`@babel/plugin-transform-async-to-generator`](https://babeljs.io/docs/en/babel-plugin-transform-async-to-generator)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## Object.values

### è¯­æ³•æè¿°

`Object.values` æ–¹æ³•è¿”å›ä¸€ä¸ªç»™å®šå¯¹è±¡è‡ªå·±çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å€¼çš„æ•°ç»„ï¼Œå€¼çš„é¡ºåºä¸ä½¿ç”¨`for...in`å¾ªç¯çš„é¡ºåºç›¸åŒï¼ˆåŒºåˆ«åœ¨äº`for...in`å¾ªç¯æšä¸¾åŸå‹é“¾ä¸­çš„å±æ€§ï¼‰

```js
const a = { C: '1' };
Object.values(a); // ["1"]
```

### polyfill

åœ¨ core-js [values.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/object/values.js)

## Object.getOwnPropertyDescriptors

### è¯­æ³•æè¿°

`Object.getOwnPropertyDescriptors()`è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„æè¿°ï¼ˆ`.value`,`.writable`,`.get`,`.set`,`.configurable`,`enumerable`ï¼‰

```js
const a = { C: '1' };
Object.getOwnPropertyDescriptors(a);//C: {value: "1", writable: true, enumerable: true, configurable: true}
```

### polyfill

åœ¨ core-js [get-own-property-descriptors.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/object/get-own-property-descriptors.js)

## å¡«å……å­—ç¬¦ä¸²

### è¯­æ³•ä»‹ç»

`padStart()`å’Œ`padEnd()`ï¼Œå¡«å……å­—ç¬¦ä¸²è¾¾åˆ°å½“å‰é•¿åº¦

```js
'aa'.padStart(4, 1); // 11aa
'aa'.padEnd(4, 1); // aa11
'aa'.padStart(4, 1234); // 12aa
'abcdef'.padStart(4, 1234); // abcdef
```

### polyfill

åœ¨ core-js [pad-end.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/pad-end.js) [pad-start.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/pad-start.js)

## å…±äº«å†…å­˜æ•°æ®

`ShareArrayBuffer`å’Œ`Atomics`ç”¨äºä»å…±äº«å†…å­˜ä½ç½®è¯»å–å’Œå†™å…¥

# ES2016

## includes

### è¯­æ³•ä»‹ç»

æ•°ç»„`includes()`æ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œæ ¹æ®æƒ…å†µï¼Œå¦‚æœåŒ…å«åˆ™è¿”å›`true`ï¼Œå¦åˆ™è¿”å›`false`ã€‚

### polyfill

åœ¨ core-js [includes.js](https://github.com/zloirock/core-js/blob/master/packages/core-js/stable/string/includes.js)

## æŒ‡æ•°è¿ç®—ç¬¦

### è¯­æ³•ä»‹ç»

`a ** b`æŒ‡æ•°è¿ç®—ç¬¦ï¼Œå®ƒä¸ `Math.pow(a, b)`ç›¸åŒ

### Babel æ’ä»¶

[`@babel/plugin-transform-exponentiation-operator`](https://babeljs.io/docs/en/babel-plugin-transform-exponentiation-operator)

**å·²ç»åŒ…å«åœ¨`@babel/preset-env`ä¸­**

## è£…é¥°å™¨

`decorator`ï¼ˆè£…é¥°å™¨ï¼‰æ˜¯ ES7 ä¸­çš„ä¸€ä¸ªææ¡ˆï¼Œç›®å‰å¤„äº `stage-2` é˜¶æ®µï¼Œææ¡ˆåœ°å€ï¼š[JavaScript Decorators](https://github.com/tc39/proposal-decorators)ã€‚

è£…é¥°å™¨ä¸ä¹‹å‰è®²è¿‡çš„å‡½æ•°ç»„åˆï¼ˆ`compose`ï¼‰ä»¥åŠé«˜é˜¶å‡½æ•°å¾ˆç›¸ä¼¼ã€‚è£…é¥°å™¨ä½¿ç”¨ `@` ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œè¢«æ”¾ç½®åœ¨è¢«è£…é¥°ä»£ç å‰é¢ã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œæ—©å°±å·²ç»æœ‰äº†æ¯”è¾ƒæˆç†Ÿçš„è£…é¥°å™¨æ–¹æ¡ˆã€‚

è£…é¥°å™¨è™½ç„¶è¿˜å±äºä¸ç¨³å®šçš„è¯­æ³•ï¼Œä½†åœ¨å¾ˆå¤šæ¡†æ¶ä¸­éƒ½å·²ç»å¹¿æ³›ä½¿ç”¨ï¼Œä¾‹å¦‚ Angularã€Nestjs ç­‰ç­‰ï¼Œå’Œ Java ä¸­çš„æ³¨è§£ç”¨æ³•éå¸¸ç›¸ä¼¼ã€‚

### å·¥å…·åº“

https://www.npmjs.com/package/core-decorators

### Babel æ’ä»¶

[`@babel/plugin-proposal-decorators`](https://babeljs.io/docs/en/babel-plugin-proposal-decorators)

### å‚è€ƒ

https://juejin.cn/post/6844904100144889864

# ES2015

ES6å·²ç»éå¸¸æˆç†Ÿäº†ï¼Œä¸‹é¢åªå…³æ³¨è¯­æ³•æœ¬èº«ï¼Œä¸å†åˆ—ä¸¾å¯¹åº”çš„babelå’Œpolyfill

## å£°æ˜

å˜é‡å£°æ˜ï¼šconstã€let

å£°æ˜å…³é”®å­—ï¼š varã€constã€letã€functionã€classã€import

## è§£æ„èµ‹å€¼

 **å­—ç¬¦ä¸²è§£æ„**ï¼š`const [a, b, c, d, e] = "hello"` 

â€‹	`console.log(a,b,c,d,e)  // h e l l o`

 **æ•°å€¼è§£æ„**ï¼š`const { toString: s } = 123`

â€‹	`console.log(s)  // f toString()`

 **å¸ƒå°”è§£æ„**ï¼š`const { toString: b } = true`

â€‹	`console.log(b)  //Æ’ toString()`

**å¯¹è±¡è§£æ„**

- å½¢å¼ï¼š`const { x, y } = { x: 1, y: 2 }`
- é»˜è®¤ï¼š`const { x, y = 2 } = { x: 1 }`
- æ”¹åï¼š`const { x, y: z } = { x: 1, y: 2 }`

**æ•°ç»„è§£æ„**

- è§„åˆ™ï¼šæ•°æ®ç»“æ„å…·æœ‰`Iteratoræ¥å£`å¯é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼
- å½¢å¼ï¼š`const [x, y] = [1, 2]`
- é»˜è®¤ï¼š`const [x, y = 2] = [1]`

**å‡½æ•°å‚æ•°è§£æ„**

- æ•°ç»„è§£æ„ï¼š`function Func([x = 0, y = 1]) {}`
- å¯¹è±¡è§£æ„ï¼š`function Func({ x = 0, y = 1 } = {}) {}`

## å¯¹è±¡æ‰©å±•

**Object.is()**ï¼šå¯¹æ¯”ä¸¤å€¼æ˜¯å¦ç›¸ç­‰

 **Object.assign()**ï¼šåˆå¹¶å¯¹è±¡(æµ…æ‹·è´)ï¼Œè¿”å›åŸå¯¹è±¡

 **Object.getPrototypeOf()**ï¼šè¿”å›å¯¹è±¡çš„åŸå‹å¯¹è±¡

 **Object.setPrototypeOf()**ï¼šè®¾ç½®å¯¹è±¡çš„åŸå‹å¯¹è±¡

 **__proto__**ï¼šè¿”å›æˆ–è®¾ç½®å¯¹è±¡çš„åŸå‹å¯¹è±¡

### éå†

`for-in`ï¼šéå†å¯¹è±¡`è‡ªèº«å¯ç»§æ‰¿å¯æšä¸¾`å±æ€§

`Object.keys()`ï¼šè¿”å›å¯¹è±¡`è‡ªèº«å¯æšä¸¾`å±æ€§é”®ç»„æˆçš„æ•°ç»„

`Object.getOwnPropertyNames()`ï¼šè¿”å›å¯¹è±¡`è‡ªèº«éSymbol`å±æ€§é”®ç»„æˆçš„æ•°ç»„

`Object.getOwnPropertySymbols()`ï¼šè¿”å›å¯¹è±¡`è‡ªèº«Symbol`å±æ€§é”®ç»„æˆçš„æ•°ç»„

`Reflect.ownKeys()`ï¼šè¿”å›å¯¹è±¡`è‡ªèº«å…¨éƒ¨`å±æ€§é”®ç»„æˆçš„æ•°ç»„

- é¦–å…ˆéå†æ‰€æœ‰æ•°å€¼é”®ï¼ŒæŒ‰ç…§æ•°å€¼å‡åºæ’åˆ—
- å…¶æ¬¡éå†æ‰€æœ‰å­—ç¬¦ä¸²é”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—
- æœ€åéå†æ‰€æœ‰Symbolé”®ï¼ŒæŒ‰ç…§åŠ å…¥æ—¶é—´å‡åºæ’åˆ—

## æ¨¡æ¿

## å­—ç¬¦ä¸²æ‰©å±•

 **String.raw()**ï¼šè¿”å›æŠŠå­—ç¬¦ä¸²æ‰€æœ‰å˜é‡æ›¿æ¢ä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰çš„ç»“æœ

 **String.fromCodePoint()**ï¼šè¿”å›ç ç‚¹å¯¹åº”å­—ç¬¦

 **codePointAt()**ï¼šè¿”å›å­—ç¬¦å¯¹åº”ç ç‚¹(`String.fromCodePoint()`çš„é€†æ“ä½œ)

 **normalize()**ï¼šæŠŠå­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹æ³•ç»Ÿä¸€ä¸ºåŒæ ·å½¢å¼ï¼Œè¿”å›`æ–°å­—ç¬¦ä¸²`(Unicodeæ­£è§„åŒ–)

 **repeat()**ï¼šæŠŠå­—ç¬¦ä¸²é‡å¤næ¬¡ï¼Œè¿”å›`æ–°å­—ç¬¦ä¸²`

 **matchAll()**ï¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²çš„æ‰€æœ‰åŒ¹é…

 **includes()**ï¼šæ˜¯å¦å­˜åœ¨æŒ‡å®šå­—ç¬¦ä¸²

 **startsWith()**ï¼šæ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²å¤´éƒ¨æŒ‡å®šå­—ç¬¦ä¸²

 **endsWith()**ï¼šæ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²å°¾éƒ¨æŒ‡å®šå­—ç¬¦ä¸²

## æ•°å€¼æ‰©å±•

**äºŒè¿›åˆ¶è¡¨ç¤ºæ³•**ï¼š`0bæˆ–0Bå¼€å¤´`è¡¨ç¤ºäºŒè¿›åˆ¶(`0bXX`æˆ–`0BXX`)

 **å…«è¿›åˆ¶è¡¨ç¤ºæ³•**ï¼š`0oæˆ–0Oå¼€å¤´`è¡¨ç¤ºå…«è¿›åˆ¶(`0oXX`æˆ–`0OXX`)

 **Number.EPSILON**ï¼šæ•°å€¼æœ€å°ç²¾åº¦

 **Number.MIN_SAFE_INTEGER**ï¼šæœ€å°å®‰å…¨æ•°å€¼(`-2^53`)

 **Number.MAX_SAFE_INTEGER**ï¼šæœ€å¤§å®‰å…¨æ•°å€¼(`2^53`)

 **Number.parseInt()**ï¼šè¿”å›è½¬æ¢å€¼çš„æ•´æ•°éƒ¨åˆ†

 **Number.parseFloat()**ï¼šè¿”å›è½¬æ¢å€¼çš„æµ®ç‚¹æ•°éƒ¨åˆ†

 **Number.isFinite()**ï¼šæ˜¯å¦ä¸ºæœ‰é™æ•°å€¼

 **Number.isNaN()**ï¼šæ˜¯å¦ä¸ºNaN

 **Number.isInteger()**ï¼šæ˜¯å¦ä¸ºæ•´æ•°

 **Number.isSafeInteger()**ï¼šæ˜¯å¦åœ¨æ•°å€¼å®‰å…¨èŒƒå›´å†…

 **Math.trunc()**ï¼šè¿”å›æ•°å€¼æ•´æ•°éƒ¨åˆ†

 **Math.sign()**ï¼šè¿”å›æ•°å€¼ç±»å‹(`æ­£æ•°1`ã€`è´Ÿæ•°-1`ã€`é›¶0`)

 **Math.cbrt()**ï¼šè¿”å›æ•°å€¼ç«‹æ–¹æ ¹

 **Math.clz32()**ï¼šè¿”å›æ•°å€¼çš„32ä½æ— ç¬¦å·æ•´æ•°å½¢å¼

 **Math.imul()**ï¼šè¿”å›ä¸¤ä¸ªæ•°å€¼ç›¸ä¹˜

 **Math.fround()**ï¼šè¿”å›æ•°å€¼çš„32ä½å•ç²¾åº¦æµ®ç‚¹æ•°å½¢å¼

 **Math.hypot()**ï¼šè¿”å›æ‰€æœ‰æ•°å€¼å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹

 **Math.expm1()**ï¼šè¿”å›`e^n - 1`

 **Math.log1p()**ï¼šè¿”å›`1 + n`çš„è‡ªç„¶å¯¹æ•°(`Math.log(1 + n)`)

 **Math.log10()**ï¼šè¿”å›ä»¥10ä¸ºåº•çš„nçš„å¯¹æ•°

 **Math.log2()**ï¼šè¿”å›ä»¥2ä¸ºåº•çš„nçš„å¯¹æ•°

 **Math.sinh()**ï¼šè¿”å›nçš„åŒæ›²æ­£å¼¦

 **Math.cosh()**ï¼šè¿”å›nçš„åŒæ›²ä½™å¼¦

 **Math.tanh()**ï¼šè¿”å›nçš„åŒæ›²æ­£åˆ‡

 **Math.asinh()**ï¼šè¿”å›nçš„ååŒæ›²æ­£å¼¦

 **Math.acosh()**ï¼šè¿”å›nçš„ååŒæ›²ä½™å¼¦

 **Math.atanh()**ï¼šè¿”å›nçš„ååŒæ›²æ­£åˆ‡

## æ•°ç»„æ‰©å±•

### æ‰©å±•è¿ç®—ç¬¦

`...`å¯ä»¥å°†ä¸€ä¸ªç±»æ•°ç»„ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²ã€å®ç°äº†Iteratoræ¥å£çš„å¯¹è±¡ã€‚

```js
console.log(...[1,2,3]) // 1 2 3

console.log(1, ...[2,3,4], 5) // 1 2 3 4 5

[...document.querySelectorAll('div')] // [<div>, <div>, <div>]

function add(x, y){
    return x + y
}
const n = [3, 5]
add(...n) // 8

//Generatorå‡½æ•°
 const go = function*(){
     yield 1;
     yield 2;
     yield 3;
 }
 [...go()] // [1, 2, 3]
```

### Array.from

å°†å¯ä»¥è¢«å±•å¼€çš„å˜é‡è½¬åŒ–æˆæ•°ç»„

```js
let arrLike = {
    '0': 'a',
    '1': 'b',
    '2': 'c',
    length: 3
}
// ES5 
var a1 = [].slice.call(arrLike)
// ES6
var a2 = Array.from(arrLike, ()=>{})
```

### Array.of

ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚ä¸»è¦ç”¨æ¥å¼¥è¡¥Arrayå‡½æ•°å› ä¸ºå‚æ•°ä¸ªæ•°ä¸åŒè€Œå¯¼è‡´çš„å·®å¼‚

```js
Array.of(3,11,6) // [3, 11, 6]
Array.of(3) // [3]
Array.of(4).length // 1
```

### æ•°ç»„çš„å®ä¾‹ copyWithin

å°†å½“å‰æ•°ç»„ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ªä½ç½®ï¼Œå¹¶ä¸”ä¼šè¦†ç›–é‚£ä¸ªä½ç½®çš„åŸæœ‰å…ƒç´ ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„

1. target(å¿…é¡»)ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ï¼Œå¦‚æœæ˜¯è´Ÿå€¼ï¼Œåˆ™å€’æ•° 
2. start(å¯é€‰)ï¼šä»è¯¥ä½ç½®è¯»å–æ•°æ®ï¼Œé»˜è®¤0ï¼Œè´Ÿå€¼åŒä¸Š 
3. end(å¯é€‰)ï¼šåˆ°è¿™ä¸ªä½ç½®åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ï¼Œè´Ÿå€¼åŒä¸Š

```js
let p = [1,2,3,4,5,6,7]
p.copyWithin(0,5,7) //å·¦ï¼ˆstartï¼‰é—­å³ï¼ˆendï¼‰å¼€
[6, 7, 3, 4, 5, 6, 7]
```

### æ•°ç»„å®ä¾‹çš„ find å’Œ findIndex

find ç”¨æ¥æ‰¾å‡ºæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œå®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰¾åˆ°ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›undefined

find æ–¹æ³•çš„å›è°ƒå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°:

1. value // å½“å‰å€¼
2. index // å½“å‰çš„ä½ç½®
3. arr // åŸæ•°ç»„

```js
let s = [1,2,3,4,5,6]

s.find(x => x > 4)
// 5
```

findIndex åŒfindæ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡éƒ½ä¸ç¬¦åˆè¿”å›çš„æ˜¯ -1,è€Œä¸”ç¬¦åˆæ˜¯è¿”å›ç¬¦åˆæ¡ä»¶å€¼çš„ä½ç½®è€Œä¸æ˜¯å€¼ã€‚

```js
let s = [1,2,3,4,5,6]
s.find(x => x > 4)
// 4
```

### æ•°ç»„å®ä¾‹çš„ fill

é€šè¿‡ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„

```js
let sz = [1,2,3,4,5,6]
sz.fill(1) // [1,1,1,1,1,1]
sz.fill(1,0,3) //[1,1,1,4,5,6]
// æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå¡«å……å€¼ï¼Œç¬¬äºŒä¸ªä¸ºèµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªä¸ºæˆªè‡³ä½ç½®(ä¸åŒ…å«è¿™ä¸ªä½ç½®)

sz.fill(1,3) // [1,2,3,1,1,1]
// å¦‚æœçœç•¥æœ€åä¸€ä¸ªå‚æ•°ï¼Œåˆ™é»˜è®¤ä»èµ·å§‹ä½ç½®åˆ°æ•°ç»„é»˜è®¤é•¿åº¦ç»“æŸ
```

### æ•°ç»„å®ä¾‹çš„ entries, keys, values

ä¸‰ç§æ–¹æ³•ä¸»è¦ç”¨äºéå†æ•°ç»„ï¼Œå¯ä»¥ç”¨ for...of...è¿›è¡Œéå†ï¼Œkeys()å¯¹åº”é”®åï¼Œvalueså¯¹åº”é”®å€¼,entries()å¯¹é”®å€¼å¯¹çš„éå†

```js
let bo = ['a', 'c']

for(let r of bo.keys()){
	console.log(r) // 0 1
}
// 0 1

for(let n of bo.values()){
	console.log(n) 
}
// a c

for(let s of bo.entries()){
	console.log(s)
}
// [0, "a"]
// [1, "c"]
```

### æ•°ç»„å®ä¾‹çš„ includes

ç”¨æ¥è¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼

```js
let i = ['a',1,2,3]

i.includes()  // false
i.includes(1) // true
i.includes(10) // false

```

indexOf å’Œincludes çš„åŒºåˆ«ï¼ŒindexOf // ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ‰¾åˆ°å‚æ•°å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œ æ‰€ä»¥è¦æ¯”è¾ƒæ˜¯å¦ä¸º -1,å¦å¤–ç”±äº å†…éƒ¨ä½¿ç”¨çš„æ˜¯ ===  åˆ™å¯¼è‡´NaN çš„è¯¯åˆ¤ï¼Œincludes // ä½¿ç”¨çš„æ˜¯ä¸ä¸€æ ·çš„ç®—æ³•ï¼Œåˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜

```
[NaN].indexOf(NaN) // -1
[NaN].includes(NaN) // true
```

### æ•°ç»„çš„ç©ºä½(é¿å…å‡ºç°ç©ºä½)

æ•°ç»„çš„ç©ºä½æŒ‡çš„æ˜¯è¯¥æ•°ç»„ä¸­æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚å¦å¤–ç©ºä½ä¸æ˜¯undefinedï¼Œå¦‚æœä¸€ä¸ªä½ç½®çš„å€¼æ˜¯undefinedï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®è¿˜æ˜¯æœ‰å€¼çš„ã€‚

```js
Array(3) // [, , ,]
```

ES5ä¸­å¤§å¤šæ•°æƒ…å†µä¸­å¯¹å¾…ç©ºä½éƒ½æ˜¯ä¼šå¿½ç•¥

```js
- forEach(), filter(), reduce(), every() å’Œ some() éƒ½ä¼šè·³è¿‡ç©ºä½
- map() è·³è¿‡ä½†ä¿ç•™è¿™ä¸ªå€¼
- join() å’Œ toString() ä¸­ ç©ºä½ === undefinedï¼Œè€Œ undefinedå’Œnullä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²
```

ES6 ä¸­ ç©ºä½åˆ™è½¬æ¢ä¸ºundefined

```js
- Array.from([1,,2]) // [1, undefined, 2]
- [...['a',,'b']]    // [ "a", undefined, "b" ]
entries()
keys()
values()
find()
findIndex()  // éƒ½ä¼šå°†ç©ºä½å¤„ç†æˆundefinedã€‚
```

## å‡½æ•°æ‰©å±•

å‚è€ƒï¼šhttps://juejin.cn/post/6930428551091109896#heading-1

### é»˜è®¤å‚æ•°

#### Es5å¤„ç†é»˜è®¤å‚æ•°

```js
function person(name, age) {
    name = typeof(name) != "undefined" ? name : `è›™äºº${+ new Date()}`
    age = typeof(age) != "undefined" ? age : 24
    
}
person()
```

#### Es6å¤„ç†é»˜è®¤å‚æ•°

```js
// åªæœ‰å‚æ•°ä¸ºundefinedçš„æ—¶å€™æ‰ä¼šè§¦å‘é»˜è®¤å‚æ•°
function person(name = "è›™äºº", age = 24) {
    console.log(name, age)
}
person()  // è›™äºº 24
person("å¼ ä¸‰", 30) // å¼ ä¸‰ 30
person(null, null) // null null

// å‡½æ•°
function defaultName() {
    return "è›™äºº"
}
function person(name = defaultName()) {
    console.log(name)
}

// å˜é‡
let defaultName = "è›™äºº"
function person(name = defaultName) {
    console.log(name)
}

// å‰é¢çš„å€¼
function person(name, nickName = name) {
     console.log(name, nickName)
}

// ä¸åˆæ³•ä¼šæŠ¥é”™
function person(name = nickName, nickName) {
     console.log(name, nickName)
}
person(undefined, 'å¼ ä¸‰');
```

### å‡½æ•°å‚æ•°é»˜è®¤å€¼å¯¹argumentsçš„å½±å“

#### Es5éä¸¥æ ¼æ¨¡å¼ä¸‹ä½¿ç”¨arguments

Es5éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å‘½åå‚æ•°çš„å˜åŒ–ä¼šä½“ç°åœ¨`arguments`å¯¹è±¡ä¸Šï¼Œ`arguments`è·å–çš„æ˜¯å½“å‰å‡½æ•°çš„å®å‚ï¼Œ`arguments`åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹å®ƒè·Ÿå½¢å‚æ˜¯æ˜ å°„å…³ç³»ï¼Œå°±æ˜¯å½¢å‚æœ‰å˜åŒ–`arguments`è·Ÿç€å˜ã€‚

```js
function test(a, b) {
    console.log(a == arguments[0]) // true
    console.log(b == arguments[1]) // true
    a = "a"
    b = "b"
    console.log(arguments) // ["a", "b"]
}
test(1, 2)
```

#### Es5ä¸¥æ ¼æ¨¡å¼ä¸‹ä½¿ç”¨arguments

```js
function test(a, b) {
    'use strict';

    console.log(arguments)  // [1, 2]
    b = 10
    console.log(arguments) // [1, 2]
}
test(1, 2)
```

#### Es6ä¸­ä½¿ç”¨é»˜è®¤å‚æ•°å€¼å¯¹argumentsçš„å½±å“

åœ¨Es6ä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä½¿ç”¨äº†é»˜è®¤å‚æ•°å€¼ï¼Œé‚£ä¹ˆ`arguments`å¯¹è±¡çš„è¡Œä¸ºéƒ½å°†ä¸`JavaScript`ä¸­çš„ä¸¥æ ¼æ¨¡å¼ä¸‹ä¿æŒä¸€è‡´ã€‚

```js
 function test(a, b = 2) {
    a = 12
    b = 10
    console.log(arguments) // [1]
}
test(1)
```

### restå‚æ•°

```js
// æ–¹å¼1
function test(...parmas) {
    console.log(params) // [1, 2, 3, 4]
}
test(1, 2, 3, 4)

// æ–¹å¼2
function test(a, b, ...params) {
    console.log(params)
}
test(1, 2, 3, 4)

// é”™è¯¯å†™æ³•ï¼Œä¸å®šå‚æ•°åªèƒ½å†™åˆ°æœ€åé¢
function test(...params, a, b) {
	
}
test()

// é”™è¯¯å†™æ³• setteråªæ¥æ”¶ä¸€ä¸ªå‚æ•°
let obj = {
  set name(...params) {

  }
}
```

### å‡½æ•°nameå±æ€§

åœ¨`JavaScript`ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª`name`å±æ€§ï¼Œè¯¥å±æ€§ä¿å­˜çš„æ˜¯è¯¥å‡½æ•°åç§°çš„å­—ç¬¦ä¸²ã€‚æ²¡æœ‰åç§°çš„å‡½æ•°ä¹Ÿä»ç„¶æœ‰`name`å±æ€§ï¼Œè¯¥`name`å±æ€§å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚

```js
function person() {}
let test = function() {}

console.log(person.name) // person
console.log(test.name) // test

```

#### nameå±æ€§çš„ç‰¹æ®Šæƒ…å†µ

```js
var person = {
    get getName() {
        return "è›™äºº"
    }
}
console.log(Object.getOwnPropertyDescriptor(person, 'getName').get.name)  // get getName

function test() {}
console.log(test.bind().name) // bound test

```

`person.getName`æ˜¯ä¸€ä¸ªå–å€¼å‡½æ•°`getter`ï¼Œæ‰€ä»¥å®ƒçš„å‡½æ•°åç§°`get getName`ï¼Œå¦‚æœæ˜¯`setter`å‡½æ•°çš„è¯é‚£ä¹ˆåç§°ä¼šæœ‰å¸¦æœ‰å‰ç¼€`set`ã€‚é€šè¿‡`bind`åˆ›å»ºçš„å‡½æ•°ï¼Œå®ƒçš„åç§°å¸¦æœ‰"bound"å‰ç¼€ã€‚

### ç®­å¤´å‡½æ•°

#### ç®­å¤´å‡½æ•°è¯­æ³•

```js
let person = val => "lxw"
let person = (val) => "lxw"
let person = (val) => {
	return "lxw"
}
let person = (val) => ({
	name: "lxw"
})
```

#### ç®­å¤´å‡½æ•°æ²¡æœ‰this

ç®­å¤´å‡½æ•°çš„`this`å€¼ï¼Œå–å†³äºå‡½æ•°å¤–éƒ¨éç®­å¤´å‡½æ•°çš„`this`å€¼ï¼Œå¦‚æœä¸Šä¸€å±‚è¿˜æ˜¯ç®­å¤´å‡½æ•°ï¼Œé‚£å°±ç»§ç»­å¾€ä¸Šæ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°é‚£ä¹ˆ`this`å°±æ˜¯`window`å¯¹è±¡

```js
let person = {
    test: () => {
        console.log(this)
    },
    fn() {
        return () => {
            console.log(this)
        }
    }
}
person.test()  // window
person.fn()()  // personå¯¹è±¡

```

#### ç®­å¤´å‡½æ•°æ²¡æœ‰`arguments`å¯¹è±¡

åŒæ ·ç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰`arguments`å¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœå®ƒå¤–å±‚è¿˜æœ‰ä¸€å±‚éç®­å¤´å‡½æ•°çš„è¯ï¼Œå°±ä¼šå»æ‰¾å¤–å±‚çš„å‡½æ•°çš„`arguments`å¯¹è±¡

```js
let test1 = () => console.log(arguments)  // æ‰§è¡Œè¯¥å‡½æ•°ä¼šæŠ›å‡ºé”™è¯¯


function test2(a, b, c) {
    return () => {
        console.log(arguments) // [1, 2, 3]
    }
}
test2(1, 2, 3)()

```

æ³¨æ„ï¼šç®­å¤´å‡½æ•°æ‰¾argumentså¯¹è±¡åªä¼šæ‰¾å¤–å±‚éç®­å¤´å‡½æ•°çš„å‡½æ•°ï¼Œå¦‚æœå¤–å±‚æ˜¯ä¸€ä¸ªéç®­å¤´å‡½æ•°çš„å‡½æ•°å¦‚æœå®ƒä¹Ÿæ²¡æœ‰argumentså¯¹è±¡ä¹Ÿä¼šä¸­æ–­è¿”å›ï¼Œå°±ä¸ä¼šåœ¨å¾€å¤–å±‚å»æ‰¾äº†

```js
function test(a) {
    return function() {
        return () => {
            console.log(arguments) // []
        }
    }
}
test(1)()()
```

#### ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨`new`å…³é”®å­—å£°æ˜

```js
let test = () => {}
new test() // æŠ›å‡ºé”™è¯¯ï¼Œæ‰¾ä¸åˆ°constructorå¯¹è±¡
```

#### ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹`prototype`

```js
let test = () => {}
test.prototype // undefined
```

#### ç®­å¤´å‡½æ•°ä¸èƒ½æ”¹å˜`this`æŒ‡å‘

```js
let person = {}
let test = () => console.log(this)

test.bind(person)()
test.call(person)
test.apply(person)
```

#### ç®­å¤´å‡½æ•°ä¸èƒ½é‡å¤å‘½åå‚æ•°

## Unicode

UTF-8 æ ‡å‡†è§„å®šï¼Œ0xD800 åˆ° 0xDFFF ä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚è¿™æ˜¯ä¸ºäº†è¡¨ç¤ºç ç‚¹å¤§äº 0xFFFF çš„å­—ç¬¦çš„ä¸€ç§å˜é€šæ–¹æ³•

ES6 å¢å¼ºäº† Unicode çš„åŠŸèƒ½,åŒ…æ‹¬

- æ”¯æŒå­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•

ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œä¸­â€çš„ Unicode ç ç‚¹æ˜¯ `U+4e2d`ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å…¥è¿™ä¸ªæ±‰å­—ï¼Œä¹Ÿå¯ä»¥è¾“å…¥å®ƒçš„è½¬ä¹‰å½¢å¼`\u4e2d`ï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚

```js
"ä¸­" === "\u4e2d"; // true
"ä¸­" ==="\u{4e2d}"; // true
```

- ä½¿ç”¨`/u`åŒ¹é…ç ç‚¹çš„æ­£åˆ™è¡¨è¾¾å¼

```js
"ğ ®·".match(/./u)[0].length == 2;
```

- è·å– 32 ä½çš„ UTF-16 å­—ç¬¦çš„ç ç‚¹-**codePointAt**

```js
"ğ ®·".codePointAt(0) == 0x20bb7;

let s = "ğ ®·a";
for (let ch of s) { // åªæœ‰for of æ‰èƒ½æ­£ç¡®å¾ªç¯è·å–ç ç‚¹
  console.log(ch.codePointAt(0).toString(16));
}
```

## æ­£åˆ™çš„æ‰©å±•

å‚è€ƒï¼š https://juejin.cn/post/6856402002763743240

### RegExpæ„é€ å‡½æ•°

```js
//ä¸‹åˆ—æ˜¯ç­‰ä»·çš„
var regex = new RegExp('xyz','i');//ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦(flag)
var regex = /xyz/i;

var regex = new RegExp(/xyz/i);
var regex = /xyz/i;

//é”™è¯¯ç¤ºä¾‹
var regex = new RegExp(/xyz/,'i');
//ES5ä¸­ä¸å…è®¸ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ ä¿®é¥°ç¬¦

//ES6
var regex = new RegExp(/abc/ig,'i').flags;
//æ­¤å¤„çš„igä¿®é¥°ç¬¦å°†ä¼šè¢«iå–ä»£

```

### å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•

match()ï¼Œreplace()ï¼Œsearch()ï¼Œsplit()å››ç§æ–¹æ³•ã€‚

ES6å°†è¿™å››ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚

- String.prototype.match è°ƒç”¨RegExp.prototype[Symbol.match]
- String.prototype.replace è°ƒç”¨RegExp.prototype[Symbol.replace]
- String.prototype.search è°ƒç”¨RegExp.prototype[Symbol.search]
- String.prototype.split è°ƒç”¨RegExp.prototype[Symbol.split]

```js
const str = 'dsd lvxw dsds dsds sdd lvsew lvxw';
const regex = new RegExp(/lvxw/g);
console.log(str.match(regex));
```

### uä¿®é¥°ç¬¦

â€œUnicodeâ€æ¨¡å¼ï¼Œå¤„ç†å¤§äº/uFFFFçš„Unicodeå­—ç¬¦

```js
// æ™®é€šæ­£åˆ™æ— æ³•æ­£ç¡®åŒ¹é… å¤§äº 0xFFFF ç ç‚¹çš„å­—ç¬¦
"ğŸ˜Š".match(/./) // ["\ud83d", index: 0, input: "ğŸ˜Š", groups: undefined]
// å¢åŠ  u ä¿®é¥°ç¬¦ï¼Œå¯ä»¥æ­£å¸¸åŒ¹é…
"ğŸ˜Š".match(/./u) // ["ğŸ˜Š", index: 0, input: "ğŸ˜Š", groups: undefined]
```

### æ­£ç¡®è®¡ç®—å­—ç¬¦æ•°

```
"asğŸ˜Šå•å°ä¼Ÿ".match(/./gu).length
```

### iä¿®é¥°ç¬¦

```js
/[a-z]/i.test('\u212A') // false
/[a-z]/iu.test('\u212A') // true
```

ç”±äº`\u004B`ä¸`\u212A`éƒ½æ˜¯å¤§å†™çš„`K`ï¼Œç›¸ç±»ä¼¼ï¼Œä¸æ·»åŠ uä¿®é¥°ç¬¦ï¼Œå°±æ— æ³•è¯†åˆ«éè§„èŒƒçš„Kå­—ç¬¦ï¼Œå› è€Œè¯†åˆ«çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯

### RegExp.prototype.unicodeå±æ€§

unicodeå±æ€§è¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†uä¿®é¥°ç¬¦

```js
const r1 = /hello/;
const r2 = /hello/u;

r1.unicode // false
r2.unicode // true
```

### yä¿®é¥°ç¬¦

â€œç²˜è¿â€(sticky)ä¿®é¥°ç¬¦ï¼Œyä¿®é¥°ç¬¦çš„ä½œç”¨ä¸gä¿®é¥°ç¬¦ç›¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…

```js
var s = 'aaa_aa_a';
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s) // ["aaa"]
r2.exec(s) // ["aaa"]

r1.exec(s) // ["aa"]
r2.exec(s) // null
```

gä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®å­˜åœ¨åŒ¹é…å³å¯è¿”å›å€¼ï¼›yä¿®é¥°ç¬¦åˆ™æ˜¯ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ç¬¬äºŒæ¬¡è°ƒç”¨r2æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®æ˜¯â€œ_â€ï¼Œå› æ­¤ä¸ç¬¦åˆåŒ¹é…ï¼Œè¿”å›nullã€‚

### lastIndex

```js
// lastIndex å¯ä»¥æŒ‡å®šåŒ¹é…çš„å¼€å§‹ä½ç½®ï¼Œ indexåŒ¹é…æˆåŠŸçš„ä½ç½®
const REGEX = /a/g;

// æŒ‡å®šä»2å·ä½ç½®ï¼ˆyï¼‰å¼€å§‹åŒ¹é…
REGEX.lastIndex = 2;

// åŒ¹é…æˆåŠŸ
const match = REGEX.exec('xaya');

// åœ¨3å·ä½ç½®åŒ¹é…æˆåŠŸ
match.index // 3

// ä¸‹ä¸€æ¬¡åŒ¹é…ä»4å·ä½å¼€å§‹
REGEX.lastIndex // 4

// 4å·ä½å¼€å§‹åŒ¹é…å¤±è´¥
REGEX.exec('xaya') // null
```

### RegExp.prototype.sticky

ES6çš„æ­£åˆ™å®ä¾‹å¤šäº†stickyå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦

```js
var r = /hello\d/y;
r.sticky // true
```

### RegExp.prototype.flags

ES6ä¸ºæ­£åˆ™è¡¨è¾¾å¼è®¾ç½®äº†flagså±æ€§ï¼Œè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦

```js
// ES5 çš„ source å±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡
/abc/ig.source
// "abc"

// ES6 çš„ flags å±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦
/abc/ig.flags
// 'gi'
```

### s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼

`.`ä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œå››ä¸ªå­—èŠ‚çš„UTF-16å­—ç¬¦å¯ä»¥ç”¨uä¿®é¥°ç¬¦è§£å†³ï¼›è€Œè¡Œç»ˆæ­¢ç¬¦åˆ™ä¸èƒ½è§£å†³

- U+000A æ¢è¡Œç¬¦ï¼ˆ`\n`ï¼‰
- U+000D å›è½¦ç¬¦ï¼ˆ`\r`ï¼‰
- U+2028 è¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰
- U+2029 æ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰

sä¿®é¥°ç¬¦å¯ä»¥è®©`.`åŒ¹é…åˆ°ä»»æ„å•ä¸ªå­—ç¬¦

```js
/foo.bar/.test('foo\nbar')// false
/foo[^]bar/.test('foo\nbar')// true
/foo.bar/s.test('foo\nbar') // true
```

dotAllå±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¤„äºdotAllæ¨¡å¼

```js
const re = /foo.bar/s;
// å¦ä¸€ç§å†™æ³•
// const re = new RegExp('foo.bar', 's');

re.test('foo\nbar') // true
re.dotAll // true
re.flags // 's'
```

`/s`ä¿®é¥°ç¬¦å’Œå¤šè¡Œä¿®é¥°ç¬¦`/m`ä¸å†²çªï¼Œä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œ`.`åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼Œè€Œ`^`å’Œ`$`åŒ¹é…æ¯ä¸€è¡Œçš„è¡Œé¦–å’Œè¡Œå°¾ã€‚

### æ–­è¨€

#### å…ˆè¡Œæ–­è¨€å’Œå…ˆè¡Œå¦å®šæ–­è¨€

â€œå…ˆè¡Œæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œ`x`åªæœ‰åœ¨`y`å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ`/x(?=y)/`

â€œå…ˆè¡Œå¦å®šæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œ`x`åªæœ‰ä¸åœ¨`y`å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ`/x(?!y)/`

```js
/\d+(?=%)/.exec('100% of US presidents have been male')  // ["100"]
/\d+(?!%)/.exec('thatâ€™s all 44 of them')                 // ["44"]
å¤åˆ¶ä»£ç 
```

æ³¨æ„ï¼šâ€œå…ˆè¡Œæ–­è¨€â€æ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ`(?=%)`ï¼‰ä¸è®¡å…¥è®¡ç®—ç»“æœ

#### åè¡Œæ–­è¨€å’Œåè¡Œå¦å®šæ–­è¨€

â€œåè¡Œæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œ`x`åªæœ‰åœ¨`y`åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ`/(?<=y)x/`

â€œåè¡Œå¦å®šæ–­è¨€â€æŒ‡çš„æ˜¯ï¼Œ`x`åªæœ‰ä¸åœ¨`y`åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ`/(?<!y)x/`

```javascript
/(?<=\$)\d+/.exec('Benjamin Franklin is on the $100 bill')  // ["100"]
/(?<!\$)\d+/.exec('itâ€™s is worth about â‚¬90')                // ["90"]
```

æ³¨æ„ï¼šæ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ`(?<=\$)`ï¼‰ä¸è®¡å…¥è®¡ç®—ç»“æœ

#### æ“ä½œé¡ºåº

å…ˆåŒ¹é…`/(?<=y)x/`çš„`x`ï¼Œå†å¾€å·¦åŒ¹é…`y`çš„éƒ¨åˆ†ï¼›ä»¥â€œå…ˆå³åå·¦â€çš„æ‰§è¡Œé¡ºåºï¼ˆä¸å…¶ä»–æ­£åˆ™æ“ä½œç›¸åï¼‰

```javascript
/(?<=(\d+))(\d+)$/.exec('1053') // ["053", "1", "053"]
/^(\d+)(\d+)$/.exec('1053') // ["1053", "105", "3"]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦æ•æ‰ä¸¤ä¸ªç»„åŒ¹é…ã€‚æ²¡æœ‰â€œåè¡Œæ–­è¨€â€æ—¶ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯`105`å’Œ`3`ã€‚è€Œâ€œåè¡Œæ–­è¨€â€æ—¶ï¼Œç”±äºæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯`1`å’Œ`053`ã€‚

```js
/(?<=(o)d\1)r/.exec('hodor')  // null
/(?<=\1d(o))r/.exec('hodor')  // ["r", "o"]
/(?<=\2(d)(o))r/.exec('hodor') // ["r", "d", "o"]
// åè¡Œæ–­è¨€æ˜¯å…ˆä»å·¦åˆ°å³æ‰«æï¼Œå‘ç°åŒ¹é…ä»¥åå†å›è¿‡å¤´ï¼Œä»å³åˆ°å·¦å®Œæˆåæ–œæ å¼•ç”¨ã€‚
// ç¬¬ä¸€ä¸ªnullæ˜¯å› ä¸ºä¸å­˜åœ¨odrè¿™ç§æƒ…å†µ
```

### Unicode å±æ€§ç±»

`\p{...}`å’Œ`\P{...}`ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆ Unicode æŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦

```javascript
const regexGreekSymbol = /\p{Script=Greek}/u;
regexGreekSymbol.test('Ï€') // true
```

`\p{Script=Greek}`æŒ‡å®šåŒ¹é…ä¸€ä¸ªå¸Œè…Šæ–‡å­—æ¯ï¼Œæ‰€ä»¥åŒ¹é…`Ï€`æˆåŠŸ

Unicode å±æ€§ç±»è¦æŒ‡å®šå±æ€§åå’Œå±æ€§å€¼

```javascript
\p{UnicodePropertyName=UnicodePropertyValue}
//æŸäº›å±æ€§ï¼Œå¯ä»¥åªå†™å±æ€§åï¼Œæˆ–è€…åªå†™å±æ€§å€¼
\p{UnicodePropertyName}
\p{UnicodePropertyValue}
```

`\P{â€¦}`æ˜¯`\p{â€¦}`çš„åå‘åŒ¹é…ï¼Œå³åŒ¹é…ä¸æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦

æ³¨æ„ï¼šè¿™ä¸¤ç§ç±»åªå¯¹Unicodeæœ‰æ•ˆï¼Œä½¿ç”¨çš„æ—¶å€™å¿…é¡»åŠ ä¸Š`u`ä¿®é¥°ç¬¦ï¼Œè‹¥ä¸æ·»åŠ ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨`\p`å’Œ`\P`ä¼šæŠ¥é”™

```javascript
const regex = /^\p{Decimal_Number}+$/u;
regex.test('ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼') // true
//å±æ€§ç±»æŒ‡å®šåŒ¹é…æ‰€æœ‰åè¿›åˆ¶å­—ç¬¦
```

`\p{Number}`èƒ½åŒ¹é…ç½—é©¬æ•°å­—

```javascript
// åŒ¹é…æ‰€æœ‰æ•°å­—
const regex = /^\p{Number}+$/u;
regex.test('Â²Â³Â¹Â¼Â½Â¾') // true
regex.test('ã‰›ã‰œã‰') // true
regex.test('â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«') // true

// åŒ¹é…æ‰€æœ‰ç©ºæ ¼
\p{White_Space}

// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰å­—æ¯ï¼Œç­‰åŒäº Unicode ç‰ˆçš„ \w
[\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰éå­—æ¯çš„å­—ç¬¦ï¼Œç­‰åŒäº Unicode ç‰ˆçš„ \W
[^\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é… Emoji
/\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F/gu

// åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦
const regexArrows = /^\p{Block=Arrows}+$/u;
regexArrows.test('â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©') // true
```

### å…·åç»„åŒ¹é…

ç»™ç»„åŒ¹é…æŒ‡å®šåç§°

```js
const RE_DATE = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;

const matchObj = RE_DATE.exec('1999-12-31');
const year = matchObj.groups.year; // 1999
const month = matchObj.groups.month; // 12
const day = matchObj.groups.day; // 31
```

å­—ç¬¦ä¸²æ›¿æ¢ï¼Œä½¿ç”¨`$<ç»„å>`å¼•ç”¨å…·åç»„

```js
let re = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/u;
'2015-01-02'.replace(re, '$<day>/$<month>/$<year>') // '02/01/2015'
```

æ³¨æ„ï¼š`replace`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼

`replace`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥æ˜¯å‡½æ•°

```js
'2015-01-02'.replace(re, (
   matched, // æ•´ä¸ªåŒ¹é…ç»“æœ 2015-01-02
   capture1, // ç¬¬ä¸€ä¸ªç»„åŒ¹é… 2015
   capture2, // ç¬¬äºŒä¸ªç»„åŒ¹é… 01
   capture3, // ç¬¬ä¸‰ä¸ªç»„åŒ¹é… 02
   position, // åŒ¹é…å¼€å§‹çš„ä½ç½® 0
   S, // åŸå­—ç¬¦ä¸² 2015-01-02
   groups // å…·åç»„æ„æˆçš„ä¸€ä¸ªå¯¹è±¡ {year, month, day}
 ) => {
 let {day, month, year} = groups;
 return `${day}/${month}/${year}`;
});

```

åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨å¼•ç”¨æŸä¸ªâ€œå…·åç»„åŒ¹é…â€ï¼Œå¯ä»¥ä½¿ç”¨`\k<ç»„å>`çš„å†™æ³•

```js
const RE_TWICE = /^(?<word>[a-z]+)!\k<word>$/;
RE_TWICE.test('abc!abc') // true
RE_TWICE.test('abc!ab') // false
```

åŒæ—¶æ•°å­—å¼•ç”¨ï¼ˆ`\1`ï¼‰ä¾ç„¶æœ‰æ•ˆï¼ˆä»£è¡¨ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œ`\2`ä¸ºç¬¬äºŒä¸ªåŒ¹é…é¡¹ï¼‰

```js
const RE_TWICE = /^(?<word>[a-z]+)!\1$/;
RE_TWICE.test('abc!abc') // true
RE_TWICE.test('abc!ab') // false
```

### æ­£åˆ™åŒ¹é…ç´¢å¼•

æ­£åˆ™å®ä¾‹çš„`exec()`æ–¹æ³•ï¼Œè¿”å›ç»“æœæœ‰ä¸€ä¸ª`index`å±æ€§ï¼Œå¯ä»¥è·å–æ•´ä¸ªåŒ¹é…ç»“æœçš„å¼€å§‹ä½ç½®

ä¸º`exec()`æ–¹æ³•çš„è¿”å›ç»“æœåŠ ä¸Š`indices`å±æ€§ï¼Œåœ¨è¿™ä¸ªå±æ€§ä¸Šé¢å¯ä»¥æ‹¿åˆ°åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼ˆç›®çš„è§£å†³åŒ…å«ç»„åŒ¹é…è€Œè·å–çš„å¼€å§‹ä½ç½®ï¼‰

å¤‡æ³¨ï¼š æµè§ˆå™¨ä¸­æœªçœ‹åˆ° indices å±æ€§

```javascript
const text = 'zabbcdef';
const re = /ab/;
const result = re.exec(text);

result.index // 1
result.indices // [ [1, 3] ]  //indiceså±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æ¯ä¸ªåŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®çš„æ•°ç»„

```

æ³¨æ„ï¼šå¼€å§‹ä½ç½®åŒ…å«åœ¨åŒ¹é…ç»“æœä¹‹ä¸­ï¼Œä½†æ˜¯ç»“æŸä½ç½®ä¸åŒ…å«åœ¨åŒ¹é…ç»“æœä¹‹ä¸­ã€‚æ¯”å¦‚ï¼ŒåŒ¹é…ç»“æœä¸º`ab`ï¼Œåˆ†åˆ«æ˜¯åŸå§‹å­—ç¬¦ä¸²çš„ç¬¬1ä½å’Œç¬¬2ä½ï¼Œé‚£ä¹ˆç»“æŸä½ç½®å°±æ˜¯ç¬¬3ä½

å¦‚æœæ­£åˆ™è¡¨è¾¾å¼åŒ…å«ç»„åŒ¹é…ï¼Œé‚£ä¹ˆ`indices`å±æ€§å¯¹åº”çš„æ•°ç»„å°±ä¼šåŒ…å«å¤šä¸ªæˆå‘˜ï¼Œæä¾›æ¯ä¸ªç»„åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®

```javascript
const text = 'zabbcdef';
const re = /ab+(cd)/;
const result = re.exec(text);

result.indices // [ [ 1, 6 ], [ 4, 6 ] ]

```

æ³¨æ„ï¼šè¿™é‡Œçš„+æ˜¯ä»£è¡¨åŒ¹é…å¤šæ¬¡bï¼Œå› è€Œç»“æŸä½ç½®æ˜¯6

å¤šç»„åŒ¹é…ä¾‹å­ï¼š

```javascript
const text = 'zabbcdef';
const re = /ab+(cd(ef))/;
const result = re.exec(text);

result.indices // [ [1, 8], [4, 8], [6, 8] ]
```

æ€»ç»“ï¼šæœ‰nä¸ªç»„åŒ¹é…ï¼Œé‚£ä¹ˆå°±æœ‰n+1ä¸ªæˆå‘˜ï¼ˆä¸€èˆ¬è€Œè¨€ï¼‰

å¦‚æœæ­£åˆ™è¡¨è¾¾å¼åŒ…å«å…·åç»„åŒ¹é…ï¼Œ`indices`å±æ€§æ•°ç»„è¿˜ä¼šæœ‰ä¸€ä¸ª`groups`å±æ€§ã€‚è¯¥å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä»è¯¥å¯¹è±¡è·å–å…·åç»„åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®

```javascript
const text = 'zabbcdef';
const re = /ab+(?<Z>cd)/;
const result = re.exec(text);

result.indices.groups // { Z: [ 4, 6 ] }
```

å¦‚æœè·å–ç»„åŒ¹é…ä¸æˆåŠŸï¼Œ`indices`å±æ€§æ•°ç»„çš„å¯¹åº”æˆå‘˜åˆ™ä¸º`undefined`ï¼Œ`indices.groups`å±æ€§å¯¹è±¡çš„å¯¹åº”æˆå‘˜ä¹Ÿæ˜¯`undefined`ã€‚

## Proxyå’ŒReflect

`Proxy` æ˜¯å¯¹è±¡çš„åŒ…è£…ï¼Œå°†ä»£ç†ä¸Šçš„æ“ä½œè½¬å‘åˆ°å¯¹è±¡ï¼Œå¹¶å¯ä»¥é€‰æ‹©æ•è·å…¶ä¸­çš„ä¸€äº›æ“ä½œã€‚

å®ƒå¯ä»¥åŒ…è£…ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ç±»å’Œå‡½æ•°ã€‚

è¯­æ³•ä¸ºï¼š

```js
let proxy = new Proxy(target, {
  /* traps */
});
```

â€¦â€¦ç„¶åï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æ‰€æœ‰åœ°æ–¹ä½¿ç”¨ `proxy` è€Œä¸æ˜¯ `target`ã€‚ä»£ç†æ²¡æœ‰è‡ªå·±çš„å±æ€§æˆ–æ–¹æ³•ã€‚å¦‚æœæä¾›äº†é’©å­ï¼Œå®ƒå°†æ•è·æ“ä½œï¼Œå¦åˆ™å°†å…¶è½¬å‘ç»™ `target` å¯¹è±¡ã€‚

æˆ‘ä»¬å¯ä»¥æ•è·ï¼š

- è¯»å–ï¼ˆ`get`ï¼‰ï¼Œå†™å…¥ï¼ˆ`set`ï¼‰ï¼Œåˆ é™¤ï¼ˆ`deleteProperty`ï¼‰å±æ€§ï¼ˆç”šè‡³æ˜¯ä¸å­˜åœ¨çš„å±æ€§ï¼‰ã€‚
- å‡½æ•°è°ƒç”¨ï¼ˆ`apply` é’©å­ï¼‰ã€‚
- `new` æ“ä½œï¼ˆ`construct` é’©å­ï¼‰ã€‚
- è®¸å¤šå…¶ä»–æ“ä½œï¼ˆå®Œæ•´åˆ—è¡¨åœ¨æœ¬æ–‡å¼€å¤´å’Œ [docs](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy) ä¸­ï¼‰ã€‚

è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºâ€œè™šæ‹Ÿâ€å±æ€§å’Œæ–¹æ³•ï¼Œå®ç°é»˜è®¤å€¼ï¼Œå¯è§‚å¯Ÿå¯¹è±¡ï¼Œå‡½æ•°è£…é¥°å™¨ç­‰ç­‰ã€‚

æˆ‘ä»¬è¿˜å¯ä»¥å°†å¯¹è±¡å¤šæ¬¡åŒ…è£…åœ¨ä¸åŒçš„ä»£ç†ä¸­ï¼Œå¹¶ç”¨å¤šä¸ªå‡½æ•°è¿›è¡Œè£…é¥°ã€‚

è¯¥[Reflect](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FReflect) APIæ—¨åœ¨è¡¥å…… [Proxy](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy)ã€‚å¯¹äºä»»ä½• `Proxy` é’©å­ï¼Œéƒ½æœ‰ä¸€ä¸ªå¸¦æœ‰ç›¸åŒå‚æ•°çš„ `Reflect` è°ƒç”¨ã€‚æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å®ƒä»¬å°†è°ƒç”¨è½¬å‘ç»™ç›®æ ‡å¯¹è±¡ã€‚

Proxy æœ‰ä¸€äº›å±€é™ï¼š

- å†…ç½®å¯¹è±¡å…·æœ‰â€œå†…éƒ¨æ’æ§½â€ï¼Œå¯¹è¿™äº›å¯¹è±¡çš„è®¿é—®æ— æ³•è¢«ä»£ç†ã€‚è¯·å‚é˜…ä¸Šé¢çš„è§£å†³æ–¹æ³•ã€‚
- ç§æœ‰ç±»å­—æ®µä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨å†…éƒ¨ä½¿ç”¨æ’æ§½å®ç°çš„ã€‚å› æ­¤ï¼Œä»£ç†æ–¹æ³•çš„è°ƒç”¨å¿…é¡»å…·æœ‰ç›®æ ‡å¯¹è±¡ `this` æ‰èƒ½è®¿é—®å®ƒä»¬ã€‚
- å¯¹è±¡ç›¸ç­‰æ€§æµ‹è¯• `===` ä¸èƒ½è¢«æ‹¦æˆªã€‚
- æ€§èƒ½ï¼šåŸºå‡†æµ‹è¯•å–å†³äºå¼•æ“ï¼Œä½†é€šå¸¸ä½¿ç”¨æœ€ç®€å•çš„ä»£ç†è®¿é—®å±æ€§æ‰€éœ€çš„æ—¶é—´è¦é•¿å‡ å€ã€‚å®é™…ä¸Šï¼Œè¿™ä»…å¯¹æŸäº›â€œç“¶é¢ˆâ€å¯¹è±¡é‡è¦ã€‚

### å‚è€ƒ

https://juejin.cn/post/6844904090116292616#heading-13

## Promise

```js
new Promise((resolve, reject)=>{resolve()})
  .then((res)=>{console.log(res)})
  .catch((err)=>{console.log(err)})
```

`Promise.all()`ï¼šå°†å¤šä¸ªå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¿”å›å…¨éƒ¨å®ä¾‹çŠ¶æ€å˜æ›´åçš„ç»“æœæ•°ç»„(é½å˜æ›´å†è¿”å›)

- å…¥å‚ï¼šå…·æœ‰`Iteratoræ¥å£`çš„æ•°æ®ç»“æ„
- æˆåŠŸï¼šåªæœ‰å…¨éƒ¨å®ä¾‹çŠ¶æ€å˜æˆ`fulfilled`ï¼Œæœ€ç»ˆçŠ¶æ€æ‰ä¼šå˜æˆ`fulfilled`
- å¤±è´¥ï¼šå…¶ä¸­ä¸€ä¸ªå®ä¾‹çŠ¶æ€å˜æˆ`rejected`ï¼Œæœ€ç»ˆçŠ¶æ€å°±ä¼šå˜æˆ`rejected`

`Promise.race()`ï¼šå°†å¤šä¸ªå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¿”å›å…¨éƒ¨å®ä¾‹çŠ¶æ€ä¼˜å…ˆå˜æ›´åçš„ç»“æœ(å…ˆå˜æ›´å…ˆè¿”å›)

- å…¥å‚ï¼šå…·æœ‰`Iteratoræ¥å£`çš„æ•°æ®ç»“æ„
- æˆåŠŸå¤±è´¥ï¼šå“ªä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€å°±è¿”å›å“ªä¸ªå®ä¾‹çš„çŠ¶æ€

`Promise.resolve()`ï¼šå°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ ç­‰ä»·äº`new Promise(resolve => resolve())`

`Promise.reject()`ï¼šå°†å¯¹è±¡è½¬ä¸ºçŠ¶æ€ä¸º`rejected`çš„Promiseå¯¹è±¡ç­‰ä»·äº`new Promise((resolve, reject) => reject())`

## Class

ES6 çš„ `class` å±äºä¸€ç§â€œè¯­æ³•ç³–â€ï¼Œæ‰€ä»¥åªæ˜¯å†™æ³•æ›´åŠ ä¼˜é›…ï¼Œæ›´åŠ åƒé¢å¯¹å¯¹è±¡çš„ç¼–ç¨‹ï¼Œå…¶æ€æƒ³å’Œ ES5 æ˜¯ä¸€è‡´çš„ã€‚

ç±»æœ¬èº«æŒ‡å‘æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰æ–¹æ³•å®šä¹‰åœ¨`prototype`ä¸Šï¼Œå¯çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•(`Class === Class.prototype.constructor`)

```js
function Point(x, y) {
  this.x = x;
  this.y = y;
}

Point.prototype.toString = function() {
  return '(' + this.x + ',' + this.y + ')';
}

// ç­‰ä»·äº

class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  toString() {
    return '(' + this.x + ',' + this.y + ')';
  }
}

class A {
    static classMethod() {
      this.baz(); // å¦‚æœé™æ€æ–¹æ³•åŒ…å«thiså…³é”®å­—ï¼Œè¿™ä¸ªthisæŒ‡çš„æ˜¯ç±»ï¼Œè€Œä¸æ˜¯å®ä¾‹ã€‚
    }
    static myStaticProp = 42;
    static baz() {
      console.log('hello');
    }
    baz() {
      console.log('world');
    }
}
A.classMethod();


```

superä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡superå‡½æ•°ã€‚

å­ç±»Bçš„æ„é€ å‡½æ•°ä¹‹ä¸­çš„super()ï¼Œä»£è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ JavaScript å¼•æ“ä¼šæŠ¥é”™ã€‚

æ³¨æ„ï¼Œsuperè™½ç„¶ä»£è¡¨äº†çˆ¶ç±»Açš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»Bçš„å®ä¾‹ï¼Œå³superå†…éƒ¨çš„thisæŒ‡çš„æ˜¯Bçš„å®ä¾‹ï¼Œå› æ­¤super()åœ¨è¿™é‡Œç›¸å½“äºA.prototype.constructor.call(this)ã€‚

```js
class A {
  constructor() {
    this.p = 2;
  }
}
// super --- A.prototype, åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡
// super --- A, åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»
class B extends A {
  constructor() {
    super(); // A.prototype.constructor.call(this) ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
  }
}
```

## Module

**exportï¼šè§„å®šæ¨¡å—å¯¹å¤–æ¥å£**

é»˜è®¤å¯¼å‡ºï¼šexport default Person(å¯¼å…¥æ—¶å¯æŒ‡å®šæ¨¡å—ä»»æ„åç§°ï¼Œæ— éœ€çŸ¥æ™“å†…éƒ¨çœŸå®åç§°)
å•ç‹¬å¯¼å‡ºï¼šexport const name = "Bruce"
æŒ‰éœ€å¯¼å‡ºï¼šexport { age, name, sex }
æ”¹åå¯¼å‡ºï¼šexport { name as newName }

**importï¼šå¯¼å…¥æ¨¡å—å†…éƒ¨åŠŸèƒ½**

é»˜è®¤å¯¼å…¥ï¼šimport Person from "person"
æ•´ä½“å¯¼å…¥ï¼šimport * as Person from "person"
æŒ‰éœ€å¯¼å…¥ï¼šimport { age, name, sex } from "person"
æ”¹åå¯¼å…¥ï¼šimport { name as newName } from "person"
è‡ªæ‰§å¯¼å…¥ï¼šimport "person"
å¤åˆå¯¼å…¥ï¼šimport Person, { name } from "person"

**å¤åˆæ¨¡å¼ï¼šexportå‘½ä»¤å’Œimportå‘½ä»¤ç»“åˆåœ¨ä¸€èµ·å†™æˆä¸€è¡Œï¼Œå˜é‡å®è´¨æ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—ï¼Œç›¸å½“äºå¯¹å¤–è½¬å‘æ¥å£ï¼Œå¯¼è‡´å½“å‰æ¨¡å—æ— æ³•ç›´æ¥ä½¿ç”¨å…¶å¯¼å…¥å˜é‡**

é»˜è®¤å¯¼å…¥å¯¼å‡ºï¼šexport { default } from "person"
æ•´ä½“å¯¼å…¥å¯¼å‡ºï¼šexport * from "person"
æŒ‰éœ€å¯¼å…¥å¯¼å‡ºï¼šexport { age, name, sex } from "person"
æ”¹åå¯¼å…¥å¯¼å‡ºï¼šexport { name as newName } from "person"
å…·åæ”¹é»˜è®¤å¯¼å…¥å¯¼å‡ºï¼šexport { name as default } from "person"
é»˜è®¤æ”¹å…·åå¯¼å…¥å¯¼å‡ºï¼šexport { default as name } from "person"

## symbol

å‚è€ƒï¼šhttps://juejin.cn/post/6857398814757224462

ES6 å¼•å…¥äº†ä¸€ç§**æ–°çš„åŸå§‹æ•°æ®ç±»å‹**`Symbol`ï¼Œè¡¨ç¤º**ç‹¬ä¸€æ— äºŒ**çš„å€¼ã€‚å¯ä»¥ä»æ ¹æœ¬ä¸Šé˜²æ­¢**å±æ€§å**çš„å†²çªï¼Œ`Symbol` å€¼é€šè¿‡**Symbolå‡½æ•°**ç”Ÿæˆ

- `Symbol`æ˜¯ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§ä¸ºï¼š`underfined`, `null`,`String`, `Boolean`, `Number`, `Object`
- `Symbol`å‡½æ•°å‰ä¸èƒ½ä½¿ç”¨`new`å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆçš„ `Symbol` æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¸æ˜¯å¯¹è±¡ã€‚
- `Symbol`å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºå¯¹ `Symbol` å®ä¾‹çš„æè¿°ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œæˆ–è€…è½¬ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œæ¯”è¾ƒå®¹æ˜“åŒºåˆ†ã€‚
- Symbolå‚æ•°åªæ˜¯æè¿°ï¼Œç›¸åŒå‚æ•°è¿”å›çš„å€¼æ˜¯ä¸ç›¸ç­‰çš„
- `Symbol` å€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—ï¼Œä¼šæŠ¥é”™ã€‚
- `Symbol` çš„å‚æ•°å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„toStringæ–¹æ³•ï¼Œå°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ‰ç”Ÿæˆä¸€ä¸ª Symbol å€¼ã€‚
- `Symbol` å€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è½¬ä¸ºå¸ƒå°”å€¼ï¼Œä½†æ˜¯ä¸èƒ½è½¬ä¸ºæ•°å€¼ã€‚
- è¯»å–æè¿°ä¸€èˆ¬è¦å°†symbolè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ŒES2019æä¾›äº†ä¸€ä¸ªå®ä¾‹å±æ€§descriptionï¼Œç›´æ¥è¿”å›Symbol çš„æè¿°ã€‚
- å¯¹è±¡çš„å†…éƒ¨ï¼Œä½¿ç”¨ Symbol å€¼å®šä¹‰å±æ€§æ—¶ï¼ŒSymbol å€¼å¿…é¡»æ”¾åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ã€‚
- `Symbol` ä½œä¸ºå±æ€§åï¼Œéå†å¯¹è±¡çš„æ—¶å€™ï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨`for...in`ã€`for...of`å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«`Object.keys()`ã€`Object.getOwnPropertyNames()`ã€`JSON.stringify()`è¿”å›ã€‚æœ‰ä¸€ä¸ª`Object.getOwnPropertySymbols()`æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§åã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚
- æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é‡æ–°ä½¿ç”¨åŒä¸€ä¸ª `Symbol` å€¼ï¼Œ`Symbol.for()`æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„ `Symbol` å€¼ã€‚å¦‚æœæœ‰ï¼Œå°±è¿”å›è¿™ä¸ª `Symbol` å€¼ï¼Œå¦åˆ™å°±æ–°å»ºä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„ `Symbol` å€¼ï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ°å…¨å±€ã€‚
- Symbol.keyFor()æ–¹æ³•è¿”å›ä¸€ä¸ª*å·²ç™»è®°* çš„ Symbol ç±»å‹å€¼çš„keyã€‚
- `Symbol()`å†™æ³•**æ²¡æœ‰**ç™»è®°æœºåˆ¶ æ¯”å¦‚ï¼Œå¦‚æœä½ è°ƒç”¨`Symbol.for("cat")`30 æ¬¡ï¼Œæ¯æ¬¡éƒ½ä¼šè¿”å›**åŒä¸€ä¸ª** `Symbol` å€¼,ä½†æ˜¯è°ƒç”¨`Symbol("cat")`30 æ¬¡ï¼Œä¼šè¿”å› **30 ä¸ªä¸åŒ**çš„ `Symbol` å€¼ã€‚
- Symbol æœ¬èº«æœ‰ä¸€äº›å†…ç½®å±æ€§ï¼Œç”¨åœ¨åº•å±‚å¯¹è±¡ä¸Šï¼Œä¾‹å¦‚ï¼šSymbol.hasInstanceï¼Œinstanceof å†…ç½®æ–¹æ³•æŒ‚è½½æ–¹æ³•çš„å±æ€§ï¼›Symbol.iteratorï¼Œ è¿­ä»£å™¨å¯¹è±¡æŒ‚è½½æ–¹æ³•çš„å±æ€§

```js
let name = Symbol('lvxiaowei')
typeof name // 'symbol'
let obj = {}
obj[name] = 'lxw'
obj[name] // lxw
```

## Iterator

å‚è€ƒï¼š https://juejin.cn/post/6844904000131694605

`Iterator` æ˜¯ä¸€ç§æ¥å£ï¼Œç›®çš„æ˜¯ä¸ºä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æœºåˆ¶ï¼Œå®ç°è¯¥æ¥å£çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨ for of è¯­æ³•è¿›è¡Œæ•°æ®éå†ï¼Œå¯¹äºè§£æ„èµ‹å€¼ï¼Œæ‰©å±•è¿ç®—ç¬¦éƒ½ä¼šè°ƒç”¨è¿­ä»£å™¨æ–¹æ³•ã€‚

**æ—¢ç„¶ä»–æ˜¯ä¸€ç§æ¥å£ï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€æ ·å®ç°è¿™ä¸ªæ¥å£å‘¢ï¼Ÿå®ç°è§„åˆ™æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ**

å› ä¸º `javascript` è¯­è¨€é‡Œæ²¡æœ‰æ¥å£çš„æ¦‚å¿µï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç†è§£æˆå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ - è¿­ä»£å™¨å¯¹è±¡ï¼Œè¿”å›æ­¤å¯¹è±¡çš„æ–¹æ³•å«åšè¿­ä»£å™¨æ–¹æ³•ã€‚

é¦–å…ˆä»–ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤å¯¹è±¡å…·æœ‰ä¸€ä¸ª`next`æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨ `next` æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªç»“æœå€¼ã€‚

è¿™ä¸ªç»“æœå€¼æ˜¯ä¸€ä¸ª `object`ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼Œ`value` å’Œ `done`ã€‚

`value`è¡¨ç¤ºå…·ä½“çš„è¿”å›å€¼ï¼Œ`done` æ˜¯å¸ƒå°”ç±»å‹çš„ï¼Œè¡¨ç¤ºé›†åˆæ˜¯å¦éå†å®Œæˆæˆ–è€…æ˜¯å¦åç»­è¿˜æœ‰å¯ç”¨æ•°æ®ï¼Œæ²¡æœ‰å¯ç”¨æ•°æ®åˆ™è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

å¦å¤–å†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆï¼Œç”¨æ¥æŒ‡å‘å½“å‰é›†åˆçš„ä½ç½®ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ `next` æ–¹æ³•ï¼ŒæŒ‡é’ˆéƒ½ä¼šå‘åç§»åŠ¨ä¸€ä¸ªä½ç½®(å¯ä»¥æƒ³è±¡æˆæ•°ç»„çš„ç´¢å¼•)ã€‚

ç®€å•ä¾‹å­ï¼š

```js
const iterableObj = {
  items: ['a', 'b', 'c'],
  [Symbol.iterator]: function () {
    let i = 0;
    return {
      next: () => {
        var done = i >= this.items.length;
        var value = !done ? this.items[i++] : undefined;
        return {
          done: done,
          value: value
        };
      },
      return() {
        // ä¸­æ–­å¾ªç¯ä¼šè°ƒç”¨
        console.log('æå‰é€€å‡º');
        return {
          //å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡
          done: true
        };
      }
    };
  }
};

for (let v of iterableObj) {
  if (v === 'a') {
    console.log('a continue');
    continue;
  }
  if (v === 'b') {
    console.log('b break');
    break;
  }
}

const [d,e]={name:'zhang'} // ä¼šæŠ¥é”™ï¼Œä¸æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡
const [d,e]=iterableObj // æŒ‰é¡ºåºè§£æ„èµ‹å€¼ï¼Œä¸ä¼šæŠ¥é”™
```

å·²é»˜è®¤éƒ¨ç½² Iterator æ¥å£çš„å¯¹è±¡ä¸»è¦åŒ…æ‹¬æ•°ç»„ã€å­—ç¬¦ä¸²ã€Setã€Map ã€ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚argumentså¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰

æ—¢ç„¶å¯è¿­ä»£å¯¹è±¡çš„è§„åˆ™å¿…é¡»åœ¨å¯¹è±¡ä¸Šéƒ¨ç½²`Symbol.iterator`å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸºæœ¬ä¸Šå°±å¯ä»¥é€šè¿‡æ­¤å±æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼Œç„¶åå°±å¯ä»¥çŸ¥é“æ˜¯å¦èƒ½ä½¿ç”¨ `for of` å–å€¼äº†ã€‚

## generator

å‚è€ƒï¼šhttps://juejin.cn/post/6844903593976266760#heading-2

iteratorå†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦æ‰‹åŠ¨è®°å½•è¿­ä»£çš„ä½ç½®ï¼Œå’Œè¿”å›æ•°æ®çŠ¶æ€ã€‚generatorå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆiteratorã€‚`generator` å°±æ˜¯ä¸€ä¸ªè¿”å›å€¼ä¸º `iterator` çš„å‡½æ•°ã€‚

```js
function* createIterator() {
  yield 1;
  yield 2;
  yield 3;
}
// generatorså¯ä»¥åƒæ­£å¸¸å‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ï¼Œä¸åŒçš„æ˜¯ä¼šè¿”å›ä¸€ä¸ª iterator
let iterator = createIterator();
console.log(iterator.next().value); // 1
console.log(iterator.next().value); // 2
console.log(iterator.next().value); // 3

// * æ ‡æ˜è¿™æ˜¯ä¸ª generatorsï¼Œ yield ç”¨æ¥åœ¨è°ƒç”¨ nextæ—¶è¿”å› value

[function] * [name]() {} // * å¯ä»¥é è¿‘å…³é”®å­—ä¹Ÿå¯ä»¥é è¿‘å‡½æ•°åï¼Œæˆ–ä¸¤ä¸é è¿‘ï¼Œéƒ½å¯ä»¥

// æ³¨æ„ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œyield ä¸èƒ½è·¨å‡½æ•°ï¼›ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨åš generator

// å¯è¿­ä»£å¯¹è±¡çš„å†™æ³•ï¼š
let collection = {
  items: [],
  *[Symbol.iterator]() {
    for (let item of this.items) {
      yield item;
    }
  }
};
```

## Set

å‚è€ƒï¼š https://juejin.cn/post/6844903959283367950#heading-12

å®šä¹‰ï¼šç±»ä¼¼äºæ•°ç»„çš„æ•°æ®ç»“æ„ï¼Œæˆå‘˜å€¼éƒ½æ˜¯å”¯ä¸€ä¸”æ²¡æœ‰é‡å¤çš„å€¼
å£°æ˜ï¼šconst set = new Set(arr)
å…¥å‚ï¼šå…·æœ‰Iteratoræ¥å£çš„æ•°æ®ç»“æ„

### å±æ€§

- constructorï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›Set
- sizeï¼šè¿”å›å®ä¾‹æˆå‘˜æ€»æ•°

### æ–¹æ³•

- add()ï¼šæ·»åŠ å€¼ï¼Œè¿”å›å®ä¾‹
- delete()ï¼šåˆ é™¤å€¼ï¼Œè¿”å›å¸ƒå°”
- has()ï¼šæ£€æŸ¥å€¼ï¼Œè¿”å›å¸ƒå°”
- clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜
- keys()ï¼šè¿”å›ä»¥å±æ€§å€¼ä¸ºéå†å™¨çš„å¯¹è±¡
- values()ï¼šè¿”å›ä»¥å±æ€§å€¼ä¸ºéå†å™¨çš„å¯¹è±¡
- entries()ï¼šè¿”å›ä»¥å±æ€§å€¼å’Œå±æ€§å€¼ä¸ºéå†å™¨çš„å¯¹è±¡
- forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜

### é‡ç‚¹éš¾ç‚¹

- éå†é¡ºåºï¼šæ’å…¥é¡ºåº
- æ²¡æœ‰é”®åªæœ‰å€¼ï¼Œå¯è®¤ä¸ºé”®å’Œå€¼ä¸¤å€¼ç›¸ç­‰
- æ·»åŠ å¤šä¸ª`NaN`æ—¶ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ª`NaN`
- æ·»åŠ ç›¸åŒçš„å¯¹è±¡æ—¶ï¼Œä¼šè®¤ä¸ºæ˜¯ä¸åŒçš„å¯¹è±¡
- æ·»åŠ å€¼æ—¶ä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢(`5 !== "5"`)
- `keys()`å’Œ`values()`çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ï¼Œ`entries()`è¿”å›çš„éå†å™¨åŒæ—¶åŒ…æ‹¬é”®å’Œå€¼ä¸”ä¸¤å€¼ç›¸ç­‰

## WeakSet

å®šä¹‰ï¼šå’ŒSetç»“æ„ç±»ä¼¼ï¼Œæˆå‘˜å€¼åªèƒ½æ˜¯å¯¹è±¡

å£°æ˜ï¼š`const set = new WeakSet(arr)`

å…¥å‚ï¼šå…·æœ‰`Iteratoræ¥å£`çš„æ•°æ®ç»“æ„

å±æ€§

- **constructor**ï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›WeakSet

æ–¹æ³•

- **add()**ï¼šæ·»åŠ å€¼ï¼Œè¿”å›å®ä¾‹
- **delete()**ï¼šåˆ é™¤å€¼ï¼Œè¿”å›å¸ƒå°”
- **has()**ï¼šæ£€æŸ¥å€¼ï¼Œè¿”å›å¸ƒå°”

### é‡ç‚¹éš¾ç‚¹

- æˆå‘˜éƒ½æ˜¯`å¼±å¼•ç”¨`ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘`WeakSetç»“æ„`å¯¹æ­¤æˆå‘˜çš„å¼•ç”¨
- æˆå‘˜ä¸é€‚åˆå¼•ç”¨ï¼Œå®ƒä¼šéšæ—¶æ¶ˆå¤±ï¼Œå› æ­¤ES6è§„å®š`WeakSetç»“æ„ä¸å¯éå†`
- å…¶ä»–å¯¹è±¡ä¸å†å¼•ç”¨æˆå‘˜æ—¶ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶æ­¤æˆå‘˜æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘æ­¤æˆå‘˜æ˜¯å¦è¿˜å­˜åœ¨äº`WeakSetç»“æ„`ä¸­

## Map

å‚è€ƒï¼š https://juejin.cn/post/6844903959283367950#heading-15

å®šä¹‰ï¼šç±»ä¼¼äºå¯¹è±¡çš„æ•°æ®ç»“æ„ï¼Œæˆå‘˜é”®æ˜¯ä»»ä½•ç±»å‹çš„å€¼
å£°æ˜ï¼šconst set = new Map(arr)
å…¥å‚ï¼šå…·æœ‰Iteratoræ¥å£ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ æ•°ç»„çš„æ•°æ®ç»“æ„

### å±æ€§

- constructorï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›Map
- sizeï¼šè¿”å›å®ä¾‹æˆå‘˜æ€»æ•°

### æ–¹æ³•

- get()ï¼šè¿”å›é”®å€¼å¯¹
- set()ï¼šæ·»åŠ é”®å€¼å¯¹ï¼Œè¿”å›å®ä¾‹
- delete()ï¼šåˆ é™¤é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”
- has()ï¼šæ£€æŸ¥é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”
- clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜
- keys()ï¼šè¿”å›ä»¥é”®ä¸ºéå†å™¨çš„å¯¹è±¡
- values()ï¼šè¿”å›ä»¥å€¼ä¸ºéå†å™¨çš„å¯¹è±¡
- entries()ï¼šè¿”å›ä»¥é”®å’Œå€¼ä¸ºéå†å™¨çš„å¯¹è±¡
- forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜

### é‡ç‚¹éš¾ç‚¹

- éå†é¡ºåºï¼šæ’å…¥é¡ºåº
- å¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼
- å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¢«è§†ä¸ºä¸€ä¸ªé”®
- å¯¹åŒæ ·å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œè¢«è§†ä¸ºä¸¤ä¸ªé”®
- é”®è·Ÿå†…å­˜åœ°å€ç»‘å®šï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·å°±è§†ä¸ºä¸¤ä¸ªé”®
- æ·»åŠ å¤šä¸ªä»¥`NaN`ä½œä¸ºé”®æ—¶ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ªä»¥`NaN`ä½œä¸ºé”®çš„å€¼
- `Objectç»“æ„`æä¾›`å­—ç¬¦ä¸²â€”å€¼`çš„å¯¹åº”ï¼Œ`Mapç»“æ„`æä¾›`å€¼â€”å€¼`çš„å¯¹åº”

## WeakMap

å®šä¹‰ï¼šå’ŒMapç»“æ„ç±»ä¼¼ï¼Œæˆå‘˜é”®åªèƒ½æ˜¯å¯¹è±¡

å£°æ˜ï¼š`const set = new WeakMap(arr)`

å…¥å‚ï¼šå…·æœ‰`Iteratoræ¥å£`ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ æ•°ç»„çš„æ•°æ®ç»“æ„

å±æ€§

- **constructor**ï¼šæ„é€ å‡½æ•°ï¼Œè¿”å›WeakMap

æ–¹æ³•

- **get()**ï¼šè¿”å›é”®å€¼å¯¹
- **set()**ï¼šæ·»åŠ é”®å€¼å¯¹ï¼Œè¿”å›å®ä¾‹
- **delete()**ï¼šåˆ é™¤é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”
- **has()**ï¼šæ£€æŸ¥é”®å€¼å¯¹ï¼Œè¿”å›å¸ƒå°”

### é‡ç‚¹éš¾ç‚¹

æˆå‘˜é”®éƒ½æ˜¯`å¼±å¼•ç”¨`ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘`WeakMapç»“æ„`å¯¹æ­¤æˆå‘˜é”®çš„å¼•ç”¨

æˆå‘˜é”®ä¸é€‚åˆå¼•ç”¨ï¼Œå®ƒä¼šéšæ—¶æ¶ˆå¤±ï¼Œå› æ­¤ES6è§„å®š`WeakMapç»“æ„ä¸å¯éå†`

å…¶ä»–å¯¹è±¡ä¸å†å¼•ç”¨æˆå‘˜é”®æ—¶ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶æ­¤æˆå‘˜æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘æ­¤æˆå‘˜æ˜¯å¦è¿˜å­˜åœ¨äº`WeakMapç»“æ„`ä¸­

ä¸€æ—¦ä¸å†éœ€è¦ï¼Œæˆå‘˜ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ é™¤å¼•ç”¨

å¼±å¼•ç”¨çš„`åªæ˜¯é”®è€Œä¸æ˜¯å€¼`ï¼Œå€¼ä¾ç„¶æ˜¯æ­£å¸¸å¼•ç”¨

å³ä½¿åœ¨å¤–éƒ¨æ¶ˆé™¤äº†æˆå‘˜é”®çš„å¼•ç”¨ï¼Œå†…éƒ¨çš„æˆå‘˜å€¼ä¾ç„¶å­˜åœ¨

